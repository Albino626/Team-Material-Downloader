# 团队素材下载工具 v1.0.0

## ⚠️ 首次使用必读

**启动服务器前，请先安装依赖！**

```bash
# 方法一：使用脚本（推荐）
双击运行：server/安装依赖.bat

# 方法二：命令行
cd server
npm install
```

如遇到 `Cannot find module 'express'` 错误，请查看：`❗ 启动失败解决方案.txt`

## 📖 功能特性

- ✅ **多站点支持** - 花瓣网、觅元素、90设计、享设计四大设计素材网站
- 👥 **团队共享** - 管理员集中登录，团队成员共享下载权限
- 🚀 **一键下载** - 自动解析素材链接，快速下载
- 📊 **配额显示** - 实时显示各站点下载配额状态
- 🔐 **安全可靠** - 管理员密码保护，权限分离

## 🚀 快速开始

### 方式一：Docker 部署（推荐）

最简单的部署方式，适合所有操作系统。

#### 使用 Docker Compose（推荐）

```bash
# 1. 克隆项目
git clone <repository-url>
cd material-downloader

# 2. 启动服务
docker-compose up -d

# 3. 查看日志
docker-compose logs -f
```

服务将在 `http://localhost:3000` 启动

详细说明请查看：[DOCKER.md](DOCKER.md)

#### 使用 Docker 命令

```bash
# 构建镜像
docker build -t material-downloader .

# 运行容器
docker run -d \
  --name material-downloader \
  -p 3000:3000 \
  -v $(pwd)/downloads:/app/Downloads \
  -v $(pwd)/browser-data:/app/browser-data \
  --restart unless-stopped \
  material-downloader
```

### 方式二：本地部署

#### 1. 安装依赖

```bash
cd server
npm install
```

#### 2. 启动服务器

**Windows用户**：双击 `server/启动服务器.bat`

**手动启动**：
```bash
cd server
node server-browser.js
```

服务器将在 `http://localhost:3000` 启动

### 方式三：远程服务器部署

适用于团队共享使用，支持 Linux 和 Windows 服务器。

详见：[远程服务器部署指南.md](远程服务器部署指南.md)

**快速步骤**：
1. 上传server文件夹到服务器
2. 运行 `npm install`
3. 配置防火墙开放3000端口
4. 启动服务器
5. 客户端配置服务器地址为：`http://服务器IP:3000`

### 3. 使用插件

1. 在uTools中安装本插件
2. 输入 **"素材下载"** 或 **"素材"** 唤起插件
3. **管理员操作**：
   - 点击 **"管理员"** 标签
   - 输入密码（默认：`321123`）⚠️ **首次登录后请立即修改！**
   - 在管理面板中分别登录各个网站
   - 前往"系统设置"修改默认密码
4. **成员操作**：
   - 在 **"素材下载"** 标签粘贴素材链接
   - 点击 **"开始解析"**
   - 下载所需格式

## 🌐 支持的网站

| 图标 | 网站 | 登录方式 | 配额 |
|------|------|---------|------|
| 🎨 | 花瓣网 | 账号密码 | 每日10次 |
| Ⓜ | 觅元素 | QQ扫码 | 不限 |
| 90 | 90设计 | QQ扫码 | 不限 |
| ∞ | 享设计 | QQ扫码 | 不限 |

## 👥 使用说明

### 管理员操作流程

1. **进入管理面板**
   - 点击"管理员"标签
   - 输入密码：`321123` ⚠️ **首次登录后请立即修改！**

2. **登录各个网站**
   - **花瓣网**：输入账号密码，点击"远程登录"
   - **觅元素**：点击"开始QQ扫码登录"，用手机QQ扫描二维码
   - **90设计**：点击"开始QQ扫码登录"，用手机QQ扫描二维码
   - **享设计**：点击"开始QQ扫码登录"，用手机QQ扫描二维码

3. **状态监控**
   - 登录后状态会自动同步到配额卡片
   - 可随时检查登录状态
   - 支持单独退出各站点登录

### 团队成员操作流程

1. **打开插件**
   - 在uTools中输入"素材下载"
   - 进入"素材下载"标签

2. **解析素材**
   - 复制素材链接（支持4个网站）
   - 粘贴到输入框
   - 点击"开始解析"

3. **下载文件**
   - 等待解析完成
   - 查看下载结果列表
   - 点击下载按钮获取文件

## ⚙️ 系统要求

- **Node.js** >= 14.0.0
- **操作系统**：Windows / macOS / Linux
- **浏览器**：自动使用Puppeteer内置Chromium
- **uTools**：最新版本

## 🔧 配置说明

### 修改管理员密码

**使用全新密码修改界面**

1. 登录管理员面板（默认密码：321123）
2. 进入"系统设置" → "密码管理"
3. 点击"🔑 修改密码"按钮
4. 在表单中填写：
   - 🔑 当前密码
   - 🆕 新密码（6-20位）
   - ✅ 确认密码
5. 实时查看密码强度：💛 弱 / 💚 中 / 💙 强
6. 点击"💾 确认修改"或按Enter提交

**快捷键操作**：
- 当前密码 + Enter → 跳转到新密码
- 新密码 + Enter → 跳转到确认密码  
- 确认密码 + Enter → 提交修改

**重置密码**：

如果忘记密码，可在"系统设置"中点击"🔄 重置密码"，恢复为默认密码：321123

### 配置Downloads路径

**在管理员面板配置（推荐）**

1. 登录管理员面板
2. 进入"系统设置" → "下载目录配置"
3. 输入自定义路径（例如：`C:\Downloads` 或 `/home/user/Downloads`）
4. 点击"保存路径"

**路径说明**：
- Windows示例：`C:\Downloads` 或 `D:\素材\下载`
- Linux/Mac示例：`/home/user/Downloads`
- 相对路径：`Downloads`（在server目录下）
- 路径会自动创建，请确保有写入权限

**使用环境变量**：
```bash
# Windows
set DOWNLOADS_PATH=D:\MyDownloads
node server-browser.js

# Linux/Mac
export DOWNLOADS_PATH=/home/user/mydownloads
node server-browser.js
```

### 修改服务器端口

打开 `server/server-browser.js`，找到：

```javascript
const PORT = 3000; // 修改为您的端口
```

### 团队部署

如需多人使用，在管理面板中修改服务器地址为局域网IP：
```
http://192.168.1.100:3000
```

## 📁 目录结构

```
团队素材下载工具-v1.0.0/
├── index.html                    # 前端界面
├── logo.png                      # 图标文件
├── preload.js                    # 预加载脚本
├── plugin.json                   # 插件配置
├── README.md                     # 使用文档
└── server/                       # 服务器端
    ├── package.json              # 依赖配置
    ├── server-browser.js         # 服务器主程序
    ├── 启动服务器.bat            # 启动脚本
    └── parsers/                  # 解析器模块
        ├── base.js               # 基础解析器
        ├── yuansu.js             # 觅元素解析器
        ├── 90sheji.js            # 90设计解析器
        └── design006.js          # 享设计解析器
```

## ❓ 常见问题

### Q1: 提示"未连接"怎么办？
**A:** 检查服务器是否启动，默认地址 `http://localhost:3000`

### Q2: 下载失败怎么办？
**A:** 
1. 检查对应网站的登录状态
2. 尝试重新登录
3. 查看服务器控制台日志

### Q3: 如何修改管理员密码？
**A:** 在管理员面板的"系统设置"中，点击"修改密码"按钮即可

### Q4: 可以多人同时使用吗？
**A:** 可以！只要连接同一个服务器即可，建议部署在局域网服务器上

### Q5: QQ扫码登录失败？
**A:** 
1. 确保使用手机QQ（不支持微信）
2. 检查网络连接
3. 等待5-10秒让二维码完全加载

### Q6: 花瓣网配额用完了怎么办？
**A:** 花瓣网每日限制10次，第二天会自动重置

### Q7: 服务器需要一直运行吗？
**A:** 是的，保持服务器运行，团队成员才能正常使用

## 🔄 更新日志

### v1.0.0 (2025-10-26)
- ✨ 初始发布版本
- ✅ 支持花瓣网、觅元素、90设计、享设计
- 🔐 管理员密码保护
- 📊 实时配额显示
- 🎨 精美UI界面

## 📄 许可证

本项目采用 [MIT License](LICENSE) 开源许可证。

## ⚠️ 免责声明

**重要**：使用本工具前，请务必阅读 [免责声明](DISCLAIMER.md)。

本工具仅供学习和研究使用，作者不对使用本工具造成的任何损失承担责任。用户应自行承担使用风险，并遵守目标网站的服务条款。

## 🐳 Docker 部署

推荐使用 Docker 部署，简单快速，适合所有操作系统。

详细说明请查看：[DOCKER.md](DOCKER.md)

## 📚 部署文档

- [DOCKER.md](DOCKER.md) - Docker 部署详细指南
- [远程服务器部署指南.md](远程服务器部署指南.md) - 远程服务器部署（Linux/Windows）
- [更新日志.md](更新日志.md) - 版本更新记录
- [DISCLAIMER.md](DISCLAIMER.md) - 免责声明

## 💬 技术支持

如遇问题，请检查：
1. Node.js版本是否 >= 14.0.0（或使用 Docker）
2. 服务器是否正常运行
3. 网络连接是否正常
4. 各网站登录状态是否有效

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## ⭐ Star

如果这个项目对你有帮助，请给个 Star ⭐

---

**祝您使用愉快！** 🎉

**最后更新**：2025-01-XX

