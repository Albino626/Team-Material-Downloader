<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›¢é˜Ÿç´ æä¸‹è½½å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* CSS å˜é‡å®šä¹‰ */
        :root {
            --bg-primary: #f5f5f7;
            --bg-secondary: #ffffff;
            --bg-tertiary: #f5f5f7;
            --text-primary: #1d1d1f;
            --text-secondary: #6e6e73;
            --text-tertiary: #86868b;
            --border-color: #d2d2d7;
            --shadow-color: rgba(0, 0, 0, 0.06);
            --hover-bg: rgba(0, 0, 0, 0.04);
        }
        
        /* æš—é»‘æ¨¡å¼å˜é‡ */
        body.dark-mode {
            --bg-primary: #000000;
            --bg-secondary: #1d1d1f;
            --bg-tertiary: #2c2c2e;
            --text-primary: #f5f5f7;
            --text-secondary: #a8a8ad;
            --text-tertiary: #98989d;
            --border-color: #38383a;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --hover-bg: rgba(255, 255, 255, 0.08);
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: var(--bg-primary);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            transition: background-color 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }
        
        .container {
            background: var(--bg-secondary);
            border-radius: 20px;
            box-shadow: 
                0 4px 24px var(--shadow-color),
                0 1px 3px rgba(0, 0, 0, 0.03);
            max-width: 650px;
            width: 100%;
            padding: 30px;
            transition: background-color 0.3s cubic-bezier(0.28, 0.11, 0.32, 1), box-shadow 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 24px;
            position: relative;
        }
        
        /* æš—é»‘æ¨¡å¼åˆ‡æ¢æ»‘å— */
        .theme-toggle {
            position: absolute;
            top: 0;
            right: 0;
            width: 45px;
            height: 27px;
            background: var(--border-color);
            border-radius: 27px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
            padding: 0;
            outline: none;
        }
        
        .theme-toggle:hover {
            background: var(--text-tertiary);
        }
        
        .theme-toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 23px;
            height: 23px;
            background: #ffffff;
            border-radius: 50%;
            transition: all 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            filter: grayscale(100%) brightness(2);
        }
        
        body.dark-mode .theme-toggle {
            background: #e5e5e7;
        }
        
        body.dark-mode .theme-toggle:hover {
            background: #d1d1d6;
        }
        
        body.dark-mode .theme-toggle-slider {
            transform: translateX(18px);
            background: #ffffff;
            filter: grayscale(100%) brightness(0.3);
        }
        
        h1 {
            color: var(--text-primary);
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 8px;
            letter-spacing: -0.02em;
            line-height: 1.1;
            transition: color 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
        }
        
        .subtitle {
            color: var(--text-secondary);
            font-size: 15px;
            font-weight: 400;
            line-height: 1.4;
            letter-spacing: 0.01em;
            transition: color 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
        }
        
        .status {
            background: var(--bg-tertiary);
            padding: 14px 18px;
            border-radius: 14px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
            border: none;
            transition: all 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
            color: var(--text-primary);
        }
        
        .status:hover {
            background: var(--hover-bg);
        }
        
        body.dark-mode .status:hover {
            background: rgba(255, 255, 255, 0.12);
        }
        
        .status-left-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* ç®¡ç†å‘˜å¯†ç éªŒè¯å±‚ */
        .admin-auth-layer {
            text-align: center;
            padding: 50px 30px;
            background: var(--bg-secondary);
            border-radius: 16px;
            border: 1px solid var(--border-color);
            transition: all 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
        }
        
        .admin-auth-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
            letter-spacing: -0.02em;
            transition: color 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
        }
        
        .admin-auth-desc {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 32px;
            line-height: 1.6;
            transition: color 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
        }
        
        .admin-auth-input {
            max-width: 320px;
            margin: 0 auto 24px;
            position: relative;
        }
        
        .admin-auth-input input {
            width: 100%;
            padding: 16px 20px;
            font-size: 16px;
            border: 2px solid var(--border-color);
            border-radius: 14px;
            text-align: center;
            letter-spacing: 3px;
            font-weight: 500;
            transition: all 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
            background: var(--bg-secondary);
            color: var(--text-primary);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }
        
        .admin-auth-input input::placeholder {
            color: var(--text-tertiary);
            letter-spacing: normal;
            font-weight: 400;
        }
        
        .admin-auth-input input:hover {
            border-color: #6366f1;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.15);
            transform: translateY(-1px);
        }
        
        .admin-auth-input input:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.15), 0 4px 16px rgba(99, 102, 241, 0.2);
            transform: translateY(-2px);
        }
        
        body.dark-mode .admin-auth-input input:focus {
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.25), 0 4px 16px rgba(99, 102, 241, 0.3);
        }
        
        .admin-content {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .admin-content.unlocked {
            display: block;
        }
        
        .admin-header {
            background: var(--bg-tertiary);
            padding: 24px;
            border-radius: 14px;
            margin-bottom: 24px;
            text-align: center;
            border: 1px solid var(--border-color);
        }
        
        .admin-header h2 {
            margin: 0 0 8px 0;
            color: var(--text-primary);
            font-size: 20px;
            font-weight: 600;
            letter-spacing: -0.015em;
        }
        
        .admin-header p {
            margin: 0;
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        /* ç«™ç‚¹ç™»å½•å¡ç‰‡ç¾åŒ– */
        .site-login-card {
            margin-bottom: 20px;
            padding: 20px;
            border-radius: 14px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            transition: all 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
        }
        
        .site-login-card:hover {
            box-shadow: 0 2px 8px var(--shadow-color);
        }
        
        .site-login-title {
            margin: 0 0 18px 0;
            font-size: 17px;
            font-weight: 600;
            color: var(--text-primary);
            letter-spacing: -0.01em;
        }
        
        /* è¡¨å•è¾“å…¥æ¡†ç¾åŒ– */
        .form-group {
            margin-bottom: 18px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-primary);
            font-size: 14px;
            transition: color 0.3s ease;
        }
        
        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 14px;
            box-sizing: border-box;
            transition: all 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
            background: var(--bg-secondary);
            color: var(--text-primary);
        }
        
        .form-input:hover {
            border-color: #6366f1;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.1);
        }
        
        .form-input:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1), 0 4px 12px rgba(99, 102, 241, 0.15);
        }
        
        /* ä¿¡æ¯æç¤ºæ¡†ç¾åŒ– */
        .info-box {
            padding: 14px 16px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            margin-bottom: 16px;
            font-size: 14px;
            line-height: 1.6;
            background: var(--bg-tertiary);
            transition: all 0.3s ease;
        }
        
        .info-box strong {
            display: block;
            margin-bottom: 6px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        /* çŠ¶æ€æ ‡ç­¾ç¾åŒ– */
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s ease;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }
        
        .status-badge.success {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border-color: var(--border-color);
        }
        
        .status-badge.info {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border-color: var(--border-color);
        }
        
        /* ä½¿ç”¨è¯´æ˜æŠ˜å æ ·å¼ */
        details {
            margin-top: 16px;
        }
        
        details summary {
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 13px;
            padding: 8px 0;
            user-select: none;
            transition: all 0.2s ease;
            list-style: none;
            position: relative;
            padding-left: 20px;
        }
        
        details summary::-webkit-details-marker {
            display: none;
        }
        
        details summary::before {
            content: 'â–¶';
            position: absolute;
            left: 0;
            transition: transform 0.2s ease;
            font-size: 10px;
            color: var(--text-tertiary);
        }
        
        details[open] summary::before {
            transform: rotate(90deg);
        }
        
        details summary:hover {
            color: var(--text-primary);
        }
        
        details .info-box {
            margin-top: 12px;
            background: rgba(255, 255, 255, 0.6);
            font-size: 13px;
            animation: slideDown 0.3s ease-out;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        body.dark-mode details .info-box {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #ef4444;
            margin-right: 10px;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.2);
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        .status-dot.connected {
            background: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
        }
        
        .status-left {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
            color: #475569;
        }
        
        /* åˆ·æ–°æŒ‰é’® */
        .refresh-btn {
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 16px;
            padding: 4px 8px;
            border-radius: 6px;
            transition: all 0.3s ease;
            opacity: 0.6;
        }
        
        .refresh-btn:hover {
            opacity: 1;
            background: rgba(99, 102, 241, 0.1);
            transform: rotate(180deg);
        }
        
        .refresh-btn:active {
            transform: rotate(180deg) scale(0.9);
        }
        
        .refresh-btn.refreshing {
            animation: spin 1s linear infinite;
            opacity: 1;
        }
        
        @keyframes spin {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
        
        .tab-buttons {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            background: var(--bg-tertiary);
            padding: 5px;
            border-radius: 14px;
            transition: background-color 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
        }
        
        .tab-btn {
            flex: 1;
            padding: 10px;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 400;
            color: var(--text-secondary);
            transition: all 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
            position: relative;
        }
        
        .tab-btn:hover:not(.active) {
            color: var(--text-primary);
        }
        
        .tab-btn.active {
            background: var(--bg-secondary);
            color: var(--text-primary);
            box-shadow: 
                0 3px 8px var(--shadow-color),
                0 1px 1px rgba(0, 0, 0, 0.05);
        }
        
        body.dark-mode .tab-btn.active {
            box-shadow: 
                0 3px 8px rgba(0, 0, 0, 0.5),
                0 1px 1px rgba(0, 0, 0, 0.3);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .input-group {
            margin-bottom: 22px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 10px;
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 500;
            transition: color 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
        }
        
        .input-group input,
        .input-group textarea {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            font-size: 15px;
            font-family: inherit;
            transition: all 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
            background: var(--bg-secondary);
            color: var(--text-primary);
        }
        
        .input-group input::placeholder,
        .input-group textarea::placeholder {
            color: var(--text-tertiary);
        }
        
        .input-group input:hover,
        .input-group textarea:hover {
            border-color: var(--text-tertiary);
        }
        
        .input-group input:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #0071e3;
            box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.1);
        }
        
        body.dark-mode .input-group input:focus,
        body.dark-mode .input-group textarea:focus {
            box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.2);
        }
        
        .input-group textarea {
            min-height: 90px;
            resize: vertical;
        }
        
        .input-hint {
            font-size: 12px;
            color: #94a3b8;
            margin-top: 6px;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .btn {
            width: 100%;
            padding: 14px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .btn:active::before {
            width: 300px;
            height: 300px;
        }
        
        .btn-primary {
            background: #0071e3;
            color: white;
            border: none;
            font-weight: 400;
        }
        
        .btn-primary:hover {
            background: #0077ed;
            transform: translateY(-1px);
        }
        
        .btn-primary:active {
            background: #006edb;
            transform: translateY(0);
        }
        
        .btn-success {
            background: #30d158;
            color: white;
            border: none;
        }
        
        .btn-success:hover {
            background: #32d65a;
            transform: translateY(-1px);
        }
        
        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            border: none;
        }
        
        .btn-secondary:hover {
            background: var(--hover-bg);
            color: var(--text-primary);
            transform: translateY(-1px);
        }
        
        body.dark-mode .btn-secondary {
            background: var(--bg-tertiary);
        }
        
        body.dark-mode .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.12);
        }
        
        .btn-danger {
            background: #ff3b30;
            color: white;
            border: none;
        }
        
        .btn-danger:hover {
            background: #ff453a;
            transform: translateY(-1px);
        }
        
        .btn:disabled {
            background: #e2e8f0;
            color: #94a3b8;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }
        
        .info-box {
            background: linear-gradient(135deg, #dbeafe, #eff6ff);
            border-left: 4px solid #6366f1;
            padding: 18px 20px;
            margin: 22px 0;
            border-radius: 12px;
            font-size: 13px;
            line-height: 1.8;
            box-shadow: 0 2px 10px rgba(99, 102, 241, 0.1);
            color: #475569;
        }
        
        .info-box strong {
            color: #334155;
            font-weight: 600;
        }
        
        .result {
            margin-top: 25px;
            padding: 20px;
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border-radius: 14px;
            border: 1px solid #e2e8f0;
            display: none;
            animation: fadeIn 0.4s ease-out;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .result.show {
            display: block;
        }
        
        .result h3 {
            font-size: 17px;
            margin-bottom: 16px;
            color: #334155;
            font-weight: 700;
        }
        
        .download-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .download-item {
            padding: 16px;
            background: white;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 16px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
            box-shadow: 0 2px 6px rgba(0,0,0,0.04);
        }
        
        .download-item:hover {
            border-color: #cbd5e1;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transform: translateX(4px);
        }
        
        .download-item a {
            color: #6366f1;
            text-decoration: none;
            font-size: 12px;
            font-weight: 500;
        }
        
        .download-item a:hover {
            text-decoration: underline;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 30px;
        }
        
        .loading.show {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }
        
        .spinner {
            width: 48px;
            height: 48px;
            border: 4px solid #e2e8f0;
            border-top: 4px solid #6366f1;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: 0 auto 16px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .loading div {
            color: #64748b;
            font-weight: 500;
            font-size: 14px;
        }
        
        /* é…é¢å®¹å™¨ - å››ä¸ªå¹¶æ’ */
        .quota-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 6px;
            margin-bottom: 16px;
        }
        
        /* å•ä¸ªç½‘ç«™é…é¢å¡ç‰‡ - Appleç´§å‡‘é£æ ¼ */
        .quota-card {
            position: relative;
            background: var(--bg-tertiary);
            border: none;
            border-radius: 12px;
            padding: 12px 14px;
            transition: all 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
            min-height: auto;
        }
        
        .quota-card:hover {
            background: var(--hover-bg);
            transform: scale(1.02);
        }
        
        body.dark-mode .quota-card:hover {
            background: rgba(255, 255, 255, 0.12);
        }
        
        /* ä¸åŒç«™ç‚¹çš„é…é¢å¡ç‰‡é¢œè‰²æ ‡è¯† - é¡¶éƒ¨è£…é¥° */
        .quota-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            border-radius: 12px 12px 0 0;
        }
        
        .quota-card.huaban::before {
            background: #ef4444;
        }
        
        .quota-card.yuansu::before {
            background: #8b5cf6;
        }
        
        .quota-card.ninetysheji::before {
            background: #f97316;
        }
        
        .quota-card.design006::before {
            background: #eab308;
        }
        
        /* å¡ç‰‡å¤´éƒ¨ */
        .quota-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .quota-card-title {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 11px;
            font-weight: 500;
            color: var(--text-primary);
            transition: color 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
        }
        
        .quota-card-icon {
            font-size: 14px;
            font-weight: 600;
        }
        
        /* 90è®¾è®¡å›¾æ ‡ç‰¹æ®Šæ ·å¼ */
        .quota-card.ninetysheji .quota-card-icon {
            color: #f97316;
            font-weight: 700;
        }
        
        /* èŠ±ç“£ç½‘å›¾æ ‡ç‰¹æ®Šæ ·å¼ */
        .quota-card.huaban .quota-card-icon {
            color: #dc2626;
            font-weight: 700;
        }
        
        /* è§…å…ƒç´ å›¾æ ‡ç‰¹æ®Šæ ·å¼ */
        .quota-card.yuansu .quota-card-icon {
            color: #7c3aed;
            font-weight: 700;
        }
        
        /* äº«è®¾è®¡å›¾æ ‡ç‰¹æ®Šæ ·å¼ */
        .quota-card.design006 .quota-card-icon {
            color: #ea580c;
        }
        
        /* é…é¢æ•°å€¼æ˜¾ç¤º - Appleç®€æ´é£æ ¼ */
        .quota-value {
            font-size: 16px;
            font-weight: 600;
            text-align: center;
            margin: 6px 0;
            color: var(--text-primary);
            letter-spacing: -0.015em;
            transition: color 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
        }
        
        .quota-value-small {
            font-size: 12px;
            font-weight: 400;
            color: var(--text-tertiary);
            transition: color 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
        }
        
        /* æœªç™»å½•çŠ¶æ€æ˜¾ç¤º */
        .quota-not-logged-in {
            font-size: 11px;
            font-weight: 400;
            text-align: center;
            color: var(--text-tertiary);
            transition: color 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
        }
        
        /* è¿›åº¦æ¡ - Appleç®€æ´é£æ ¼ */
        .quota-progress {
            background: rgba(0, 0, 0, 0.08);
            border-radius: 3px;
            height: 3px;
            overflow: hidden;
            margin-top: 6px;
            position: relative;
        }
        
        .quota-progress-bar {
            height: 100%;
            transition: width 0.6s cubic-bezier(0.28, 0.11, 0.32, 1);
            border-radius: 3px;
            position: relative;
        }
        
        .quota-card.huaban .quota-progress-bar {
            background: #ef4444;
        }
        
        .quota-card.yuansu .quota-progress-bar {
            background: #8b5cf6;
        }
        
        .quota-card.ninetysheji .quota-progress-bar {
            background: #f97316;
        }
        
        .quota-card.design006 .quota-progress-bar {
            background: #eab308;
        }
        
        /* çŠ¶æ€æ ‡ç­¾ - Appleç®€æ´é£æ ¼ */
        .quota-status {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 6px;
            font-size: 10px;
            font-weight: 500;
            letter-spacing: -0.01em;
        }
        
        .quota-status.unlimited {
            background: rgba(0, 0, 0, 0.05);
            color: #1d1d1f;
        }
        
        .quota-status.limited {
            background: rgba(0, 0, 0, 0.05);
            color: #86868b;
        }
        
        /* ä¸åŒç«™ç‚¹çš„çŠ¶æ€é¢œè‰² */
        .quota-status.huaban-logged {
            background: linear-gradient(135deg, #dc2626, #ef4444);
            color: white;
        }
        
        .quota-status.design006-logged {
            background: linear-gradient(135deg, #ca8a04, #eab308);
            color: white;
        }
        
        .quota-status.yuansu-logged {
            background: linear-gradient(135deg, #7c3aed, #8b5cf6);
            color: white;
        }
        
        .quota-status.ninetyshejie-logged {
            background: linear-gradient(135deg, #ea580c, #f97316);
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="theme-toggle" onclick="toggleDarkMode()" id="themeToggle" title="åˆ‡æ¢æš—é»‘æ¨¡å¼">
                <span class="theme-toggle-slider" id="themeSlider">â˜€ï¸</span>
            </button>
            <h1>å›¢é˜Ÿç´ æä¸‹è½½å·¥å…·</h1>
        </div>
        
        <div class="status">
            <div class="status-left-group">
                <div class="status-dot" id="statusDot"></div>
                <span id="statusText">æœªè¿æ¥</span>
                <span id="serverUrlDisplay" style="margin-left: 12px; color: var(--text-secondary); font-size: 12px; opacity: 0.7;"></span>
            </div>
            <div style="display: flex; gap: 8px; align-items: center;">
                <button class="refresh-btn" onclick="showServerConfig()" id="serverConfigBtn" title="åˆ‡æ¢æœåŠ¡å™¨" style="font-size: 14px; padding: 6px 10px;">
                    ğŸŒ
                </button>
                <button class="refresh-btn" onclick="manualRefresh()" id="refreshBtn" title="åˆ·æ–°è¿æ¥å’Œç™»å½•çŠ¶æ€">
                    ğŸ”„
                </button>
            </div>
        </div>
        
        <!-- ä¸‹è½½é…é¢æ˜¾ç¤º - å¡ç‰‡å¸ƒå±€ -->
        <div class="quota-container" id="quotaContainer" style="display: none;">
            <!-- èŠ±ç“£ç½‘é…é¢å¡ç‰‡ -->
            <div class="quota-card huaban" id="huabanQuotaCard">
                <div class="quota-card-header">
                    <div class="quota-card-title">
                        <span class="quota-card-icon">ğŸ¨</span>
                        <span>èŠ±ç“£ç½‘</span>
                    </div>
                    <span class="quota-status limited" id="huabanStatus">æ£€æŸ¥ä¸­...</span>
                </div>
                <!-- å·²ç™»å½•æ—¶æ˜¾ç¤º -->
                <div id="huabanLoggedInContent">
                    <div class="quota-value">
                        <span id="huabanRemaining">-</span>
                        <span class="quota-value-small">/ <span id="huabanTotal">10</span></span>
                    </div>
                    <div class="quota-progress">
                        <div class="quota-progress-bar" id="huabanProgressBar"></div>
                    </div>
                </div>
                <!-- æœªç™»å½•æ—¶æ˜¾ç¤º -->
                <div id="huabanNotLoggedInContent" style="display: none;">
                    <div class="quota-not-logged-in">æœªç™»å½•</div>
                </div>
            </div>
            
            <!-- è§…å…ƒç´ é…é¢å¡ç‰‡ -->
            <div class="quota-card yuansu" id="yuansuQuotaCard">
                <div class="quota-card-header">
                    <div class="quota-card-title">
                        <span class="quota-card-icon">â“‚</span>
                        <span>è§…å…ƒç´ </span>
                    </div>
                    <span class="quota-status unlimited" id="yuansuStatus">æœªç™»å½•</span>
                </div>
                <!-- å·²ç™»å½•æ—¶æ˜¾ç¤º -->
                <div id="yuansuLoggedInContent" style="display: none;">
                    <div class="quota-value">
                        <span id="yuansuRemaining">0</span>
                        <span class="quota-value-small">/ âˆ</span>
                    </div>
                    <div class="quota-progress">
                        <div class="quota-progress-bar" id="yuansuProgressBar" style="width: 0%;"></div>
                    </div>
                </div>
                <!-- æœªç™»å½•æ—¶æ˜¾ç¤º -->
                <div id="yuansuNotLoggedInContent">
                    <div class="quota-not-logged-in">æœªç™»å½•</div>
                </div>
            </div>
            
            <!-- 90è®¾è®¡é…é¢å¡ç‰‡ -->
            <div class="quota-card ninetysheji" id="ninetyshejieQuotaCard">
                <div class="quota-card-header">
                    <div class="quota-card-title">
                        <span class="quota-card-icon">90</span>
                        <span>90è®¾è®¡</span>
                    </div>
                    <span class="quota-status unlimited" id="ninetyshejieStatus">æœªç™»å½•</span>
                </div>
                <!-- å·²ç™»å½•æ—¶æ˜¾ç¤º -->
                <div id="ninetyshejieLoggedInContent" style="display: none;">
                    <div class="quota-value">
                        <span id="ninetyshejieRemaining">0</span>
                        <span class="quota-value-small">/ âˆ</span>
                    </div>
                    <div class="quota-progress">
                        <div class="quota-progress-bar" id="ninetyshejieProgressBar" style="width: 0%;"></div>
                    </div>
                </div>
                <!-- æœªç™»å½•æ—¶æ˜¾ç¤º -->
                <div id="ninetyshejieNotLoggedInContent">
                    <div class="quota-not-logged-in">æœªç™»å½•</div>
                </div>
            </div>
            
            <!-- äº«è®¾è®¡é…é¢å¡ç‰‡ -->
            <div class="quota-card design006" id="design006QuotaCard">
                <div class="quota-card-header">
                    <div class="quota-card-title">
                        <span class="quota-card-icon">âˆ</span>
                        <span>äº«è®¾è®¡</span>
                    </div>
                    <span class="quota-status limited" id="design006Status">æ£€æŸ¥ä¸­...</span>
                </div>
                <!-- å·²ç™»å½•æ—¶æ˜¾ç¤º -->
                <div id="design006LoggedInContent">
                    <div class="quota-value">
                        <span id="design006Remaining">-</span>
                        <span class="quota-value-small">/ <span id="design006Total">10</span></span>
                    </div>
                    <div class="quota-progress">
                        <div class="quota-progress-bar" id="design006ProgressBar"></div>
                    </div>
                </div>
                <!-- æœªç™»å½•æ—¶æ˜¾ç¤º -->
                <div id="design006NotLoggedInContent" style="display: none;">
                    <div class="quota-not-logged-in">æœªç™»å½•</div>
                </div>
            </div>
        </div>
        
        <div class="tab-buttons">
            <button class="tab-btn" onclick="switchTab('member')">ç´ æä¸‹è½½</button>
            <button class="tab-btn" onclick="switchTab('admin')">ç®¡ç†å‘˜</button>
        </div>
        
        <!-- æˆå‘˜ä¸‹è½½ -->
        <div class="tab-content" id="memberTab">
            <div class="input-group">
                <label for="urlInput">ç´ æé“¾æ¥</label>
                <input 
                    type="text" 
                    id="urlInput" 
                    placeholder="ç²˜è´´ç´ æé“¾æ¥ï¼Œè‡ªåŠ¨è¯†åˆ«èŠ±ç“£ç½‘ã€è§…å…ƒç´ ã€90è®¾è®¡æˆ–äº«è®¾è®¡..."
                    oninput="detectUrlType()"
                >
                <div class="input-hint" id="urlHint" style="display: flex; align-items: center; gap: 8px; flex-wrap: wrap;">
                    <span>æ”¯æŒç½‘ç«™ï¼š</span>
                    <span style="background: #ee584a; color: white; padding: 2px 8px; border-radius: 4px; font-size: 11px;">èŠ±ç“£ç½‘</span>
                    <span style="background: #8b5cf6; color: white; padding: 2px 8px; border-radius: 4px; font-size: 11px;">è§…å…ƒç´ </span>
                    <span style="background: #f97316; color: white; padding: 2px 8px; border-radius: 4px; font-size: 11px;">90è®¾è®¡</span>
                    <span style="background: #eab308; color: white; padding: 2px 8px; border-radius: 4px; font-size: 11px;">äº«è®¾è®¡</span>
                    <span id="detectedSite" style="display: none; margin-left: auto; font-weight: 600;"></span>
                </div>
            </div>
            
            <button class="btn btn-primary" onclick="parseUrl()">
                å¼€å§‹è§£æ
            </button>
            
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <div>æ­£åœ¨è§£æ...</div>
            </div>
            
            <div class="result" id="result">
                <h3>ğŸ“¦ ä¸‹è½½ç»“æœ</h3>
                <ul class="download-list" id="downloadList"></ul>
            </div>
            
        </div>
        
        <!-- ç®¡ç†å‘˜ç™»å½• -->
        <div class="tab-content" id="adminTab">
            <!-- å¯†ç éªŒè¯å±‚ -->
            <div class="admin-auth-layer" id="adminAuthLayer">
                <div class="admin-auth-title">ç®¡ç†å‘˜éªŒè¯</div>
                <div class="admin-auth-desc">è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç ä»¥è®¿é—®ç®¡ç†åŠŸèƒ½<br>å¯†ç ä»…ç”¨äºæœ¬åœ°éªŒè¯ï¼Œä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨</div>
                <div class="admin-auth-input">
                    <input 
                        type="password" 
                        id="adminPasswordInput" 
                        placeholder="è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç "
                        maxlength="20"
                        autocomplete="off"
                        onkeypress="if(event.key === 'Enter') verifyAdminPassword()"
                    >
                </div>
                <button class="btn btn-primary" onclick="verifyAdminPassword()" id="adminVerifyBtn" style="min-width: 200px; padding: 14px 28px; font-size: 16px; font-weight: 500;">
                    éªŒè¯å¯†ç 
                </button>
            </div>
            
            <!-- ç®¡ç†å‘˜å†…å®¹åŒºï¼ˆéœ€è¦å¯†ç éªŒè¯åæ˜¾ç¤ºï¼‰ -->
            <div class="admin-content" id="adminContent">
                <div class="admin-header">
                    <h2>ç®¡ç†å‘˜æ§åˆ¶é¢æ¿</h2>
                    <p>ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ç«™ç‚¹ç™»å½•çŠ¶æ€å’Œç³»ç»Ÿè®¾ç½®</p>
                </div>
                
                <!-- ==================== èŠ±ç“£ç½‘ç™»å½•åŒºåŸŸ ==================== -->
            <div class="site-login-card huaban">
                <h3 class="site-login-title">èŠ±ç“£ç½‘ç™»å½•ç®¡ç†</h3>
                
                <!-- èŠ±ç“£ç½‘å·²ç™»å½•çŠ¶æ€ -->
                <div id="huabanLoggedInSection" style="display: none;">
                    <div class="status-badge success">
                        <span>å·²ç™»å½•</span>
                        <span>å›¢é˜Ÿæˆå‘˜å¯ä»¥æ­£å¸¸ä¸‹è½½èŠ±ç“£ç½‘ç´ æ</span>
                    </div>
                    
                    <button class="btn btn-danger" onclick="huabanLogout()" id="huabanLogoutBtn" style="margin-top: 16px; width: 100%;">
                        é€€å‡ºç™»å½•
                    </button>
                </div>
                
                <!-- èŠ±ç“£ç½‘æœªç™»å½•çŠ¶æ€ -->
                <div id="huabanLoginFormSection">
                    <form id="huabanLoginForm" onsubmit="return false;">
                        <div class="form-group">
                            <label for="huabanAccount" class="form-label">è´¦å·</label>
                            <input 
                                type="text" 
                                id="huabanAccount" 
                                class="form-input"
                                placeholder="è¯·è¾“å…¥è´¦å·ï¼ˆæ‰‹æœºå·æˆ–é‚®ç®±ï¼‰" 
                                required
                            />
                        </div>
                        
                        <div class="form-group">
                            <label for="huabanPassword" class="form-label">å¯†ç </label>
                            <input 
                                type="password" 
                                id="huabanPassword" 
                                class="form-input"
                                placeholder="è¯·è¾“å…¥å¯†ç " 
                                required
                            />
                        </div>
                        
                        <button type="submit" class="btn btn-primary" onclick="huabanLogin()" id="huabanLoginBtn" style="width: 100%; margin-top: 8px;">
                            ç™»å½•èŠ±ç“£ç½‘
                        </button>
                    </form>
                    
                    <button class="btn btn-secondary" onclick="checkHuabanStatus()" style="margin-top: 12px; width: 100%;">
                        æ£€æŸ¥çŠ¶æ€
                    </button>
                    
                    <details>
                        <summary>æŸ¥çœ‹ä½¿ç”¨è¯´æ˜</summary>
                        <div class="info-box">
                            â‘  è¾“å…¥èŠ±ç“£ç½‘è´¦å·å’Œå¯†ç <br>
                            â‘¡ ç‚¹å‡»ã€Œç™»å½•èŠ±ç“£ç½‘ã€æŒ‰é’®<br>
                            â‘¢ <strong>åªéœ€ç™»å½•ä¸€æ¬¡</strong>ï¼Œé•¿æœŸæœ‰æ•ˆ
                        </div>
                    </details>
                </div>
            </div>
            
            <!-- ==================== è§…å…ƒç´ ç™»å½•åŒºåŸŸ ==================== -->
            <div class="site-login-card yuansu">
                <h3 class="site-login-title">è§…å…ƒç´ ç™»å½•ç®¡ç†</h3>
                
                <!-- è§…å…ƒç´ å·²ç™»å½•çŠ¶æ€ -->
                <div id="yuansuLoggedInSection" style="display: none;">
                    <div class="status-badge success">
                        <span>å·²ç™»å½•</span>
                        <span>å›¢é˜Ÿæˆå‘˜å¯ä»¥æ­£å¸¸ä¸‹è½½è§…å…ƒç´ ç´ æ</span>
                    </div>
                    
                    <button class="btn btn-danger" onclick="yuansuLogout()" id="yuansuLogoutBtn" style="margin-top: 16px; width: 100%;">
                        é€€å‡ºç™»å½•
                    </button>
                </div>
                
                <!-- è§…å…ƒç´ æœªç™»å½•çŠ¶æ€ -->
                <div id="yuansuLoginFormSection">
                    <!-- äºŒç»´ç æ˜¾ç¤ºåŒºåŸŸ -->
                    <div id="yuansuQrCodeSection" style="display: none; margin-top: 15px;">
                        <div style="text-align: center; padding: 20px; background: var(--bg-tertiary); border-radius: 12px; border: 1px solid var(--border-color);">
                            <div style="font-size: 15px; font-weight: 600; margin-bottom: 15px; color: var(--text-primary);">
                                è¯·ä½¿ç”¨æ‰‹æœºQQæ‰«æä¸‹æ–¹äºŒç»´ç 
                            </div>
                            <img id="yuansuQrCodeImg" src="" style="max-width: 100%; height: auto; border-radius: 8px;" />
                            <div style="margin-top: 15px; color: var(--text-secondary); font-size: 14px;">
                                <div id="yuansuQrCodeStatus">ç­‰å¾…æ‰«ç ...</div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="yuansuQrLogin()" id="yuansuQrLoginBtn" style="margin-top: 15px; width: 100%;">
                        å¼€å§‹QQæ‰«ç ç™»å½•
                    </button>
                    
                    <button class="btn btn-secondary" onclick="checkYuansuStatus()" style="margin-top: 12px; width: 100%;">
                        æ£€æŸ¥çŠ¶æ€
                    </button>
                    
                    <details>
                        <summary>æŸ¥çœ‹ä½¿ç”¨è¯´æ˜</summary>
                        <div class="info-box">
                            â‘  ç‚¹å‡»ã€Œå¼€å§‹QQæ‰«ç ç™»å½•ã€æŒ‰é’®<br>
                            â‘¡ æœåŠ¡å™¨è‡ªåŠ¨è·å–äºŒç»´ç ï¼ˆçº¦5-10ç§’ï¼‰<br>
                            â‘¢ äºŒç»´ç ä¼šæ˜¾ç¤ºåœ¨<strong>æ’ä»¶ç•Œé¢ä¸­</strong><br>
                            â‘£ ä½¿ç”¨<strong>æ‰‹æœºQQ</strong>æ‰«ææ’ä»¶ä¸­æ˜¾ç¤ºçš„äºŒç»´ç <br>
                            â‘¤ åœ¨æ‰‹æœºä¸Šç¡®è®¤ç™»å½•<br>
                            â‘¥ ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹ç™»å½•çŠ¶æ€ï¼ˆæœ€å¤š3åˆ†é’Ÿï¼‰<br>
                            â‘¦ <strong>åªéœ€ç™»å½•ä¸€æ¬¡</strong>ï¼Œé•¿æœŸæœ‰æ•ˆ
                        </div>
                    </details>
                </div>
            </div>
            
            <!-- ==================== 90è®¾è®¡ç™»å½•åŒºåŸŸ ==================== -->
            <div class="site-login-card ninetyshejie">
                <h3 class="site-login-title">90è®¾è®¡ç™»å½•ç®¡ç†</h3>
                
                <!-- 90è®¾è®¡å·²ç™»å½•çŠ¶æ€ -->
                <div id="ninetyShejieLoggedInSection" style="display: none;">
                    <div class="status-badge success">
                        <span>å·²ç™»å½•</span>
                        <span>å›¢é˜Ÿæˆå‘˜å¯ä»¥æ­£å¸¸ä¸‹è½½90è®¾è®¡ç´ æ</span>
                    </div>
                    
                    <button class="btn btn-danger" onclick="ninetyShejieLogout()" id="ninetyShejieLogoutBtn" style="margin-top: 16px; width: 100%;">
                        é€€å‡ºç™»å½•
                    </button>
                </div>
                
                <!-- 90è®¾è®¡æœªç™»å½•çŠ¶æ€ -->
                <div id="ninetyShejieLoginFormSection">
                    <!-- äºŒç»´ç æ˜¾ç¤ºåŒºåŸŸ -->
                    <div id="ninetyShejieQrCodeSection" style="display: none; margin-top: 15px;">
                        <div style="text-align: center; padding: 20px; background: var(--bg-tertiary); border-radius: 12px; border: 1px solid var(--border-color);">
                            <div style="font-size: 15px; font-weight: 600; margin-bottom: 15px; color: var(--text-primary);">
                                è¯·ä½¿ç”¨æ‰‹æœºQQæ‰«æä¸‹æ–¹äºŒç»´ç 
                            </div>
                            <img id="ninetyShejieQrCodeImg" src="" style="max-width: 100%; height: auto; border-radius: 8px;" />
                            <div style="margin-top: 15px; color: var(--text-secondary); font-size: 14px;">
                                <div id="ninetyShejieQrCodeStatus">ç­‰å¾…æ‰«ç ...</div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="ninetyShejieQrLogin()" id="ninetyShejieQrLoginBtn" style="margin-top: 15px; width: 100%;">
                        å¼€å§‹QQæ‰«ç ç™»å½•
                    </button>
                    
                    <button class="btn btn-secondary" onclick="checkNinetyShejieStatus()" style="margin-top: 12px; width: 100%;">
                        æ£€æŸ¥çŠ¶æ€
                    </button>
                    
                    <details>
                        <summary>æŸ¥çœ‹ä½¿ç”¨è¯´æ˜</summary>
                        <div class="info-box">
                            â‘  ç‚¹å‡»ã€Œå¼€å§‹QQæ‰«ç ç™»å½•ã€æŒ‰é’®<br>
                            â‘¡ æœåŠ¡å™¨è‡ªåŠ¨è·å–äºŒç»´ç ï¼ˆçº¦5-10ç§’ï¼‰<br>
                            â‘¢ äºŒç»´ç ä¼šæ˜¾ç¤ºåœ¨<strong>æ’ä»¶ç•Œé¢ä¸­</strong><br>
                            â‘£ ä½¿ç”¨<strong>æ‰‹æœºQQ</strong>æ‰«ææ’ä»¶ä¸­æ˜¾ç¤ºçš„äºŒç»´ç <br>
                            â‘¤ åœ¨æ‰‹æœºä¸Šç¡®è®¤ç™»å½•<br>
                            â‘¥ ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹ç™»å½•çŠ¶æ€ï¼ˆæœ€å¤š3åˆ†é’Ÿï¼‰<br>
                            â‘¦ <strong>åªéœ€ç™»å½•ä¸€æ¬¡</strong>ï¼Œé•¿æœŸæœ‰æ•ˆ
                        </div>
                    </details>
                </div>
            </div>
            
            <!-- ==================== äº«è®¾è®¡ç™»å½•åŒºåŸŸ ==================== -->
            <div class="site-login-card design006">
                <h3 class="site-login-title">äº«è®¾è®¡ç™»å½•ç®¡ç†</h3>
                
                <!-- äº«è®¾è®¡å·²ç™»å½•çŠ¶æ€ -->
                <div id="design006LoggedInSection" style="display: none;">
                    <div class="status-badge success">
                        <span>å·²ç™»å½•</span>
                        <span>å›¢é˜Ÿæˆå‘˜å¯ä»¥æ­£å¸¸ä¸‹è½½äº«è®¾è®¡ç´ æ</span>
                    </div>
                    
                    <button class="btn btn-danger" onclick="design006Logout()" id="design006LogoutBtn" style="margin-top: 16px; width: 100%;">
                        é€€å‡ºç™»å½•
                    </button>
                </div>
                
                <!-- äº«è®¾è®¡æœªç™»å½•çŠ¶æ€ -->
                <div id="design006LoginFormSection">
                    <!-- äºŒç»´ç æ˜¾ç¤ºåŒºåŸŸ -->
                    <div id="design006QrCodeSection" style="display: none; margin-top: 15px;">
                        <div style="text-align: center; padding: 20px; background: var(--bg-tertiary); border-radius: 12px; border: 1px solid var(--border-color);">
                            <div style="font-size: 15px; font-weight: 600; margin-bottom: 15px; color: var(--text-primary);">
                                è¯·ä½¿ç”¨æ‰‹æœºQQæ‰«æä¸‹æ–¹äºŒç»´ç 
                            </div>
                            <img id="design006QrCodeImg" src="" style="max-width: 100%; height: auto; border-radius: 8px;" />
                            <div style="margin-top: 15px; color: var(--text-secondary); font-size: 14px;">
                                <div id="design006QrCodeStatus">ç­‰å¾…æ‰«ç ...</div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="design006QrLogin()" id="design006QrLoginBtn" style="margin-top: 15px; width: 100%;">
                        å¼€å§‹QQæ‰«ç ç™»å½•
                    </button>
                    
                    <button class="btn btn-secondary" onclick="checkDesign006Status()" style="margin-top: 12px; width: 100%;">
                        æ£€æŸ¥çŠ¶æ€
                    </button>
                    
                    <details>
                        <summary>æŸ¥çœ‹ä½¿ç”¨è¯´æ˜</summary>
                        <div class="info-box">
                            â‘  ç‚¹å‡»ã€Œå¼€å§‹QQæ‰«ç ç™»å½•ã€æŒ‰é’®<br>
                            â‘¡ æœåŠ¡å™¨è‡ªåŠ¨è·å–äºŒç»´ç ï¼ˆçº¦5-10ç§’ï¼‰<br>
                            â‘¢ äºŒç»´ç ä¼šæ˜¾ç¤ºåœ¨<strong>æ’ä»¶ç•Œé¢ä¸­</strong><br>
                            â‘£ ä½¿ç”¨<strong>æ‰‹æœºQQ</strong>æ‰«ææ’ä»¶ä¸­æ˜¾ç¤ºçš„äºŒç»´ç <br>
                            â‘¤ åœ¨æ‰‹æœºä¸Šç¡®è®¤ç™»å½•<br>
                            â‘¥ ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹ç™»å½•çŠ¶æ€ï¼ˆæœ€å¤š3åˆ†é’Ÿï¼‰<br>
                            â‘¦ <strong>åªéœ€ç™»å½•ä¸€æ¬¡</strong>ï¼Œé•¿æœŸæœ‰æ•ˆ
                        </div>
                    </details>
                </div>
            </div>
            
            <!-- ==================== ç³»ç»Ÿè®¾ç½®åŒºåŸŸ ==================== -->
            <div class="site-login-card" style="margin-top: 24px;">
                <h3 class="site-login-title">ç³»ç»Ÿè®¾ç½®</h3>
                
                <!-- å›¢é˜ŸæœåŠ¡å™¨é…ç½® -->
                <div style="margin-bottom: 20px;">
                    <h4 style="margin: 0 0 12px 0; color: var(--text-primary); font-size: 15px; font-weight: 600;">
                        å›¢é˜ŸæœåŠ¡å™¨é…ç½®
                    </h4>
                    <div id="serverConfigList" style="margin-bottom: 12px;">
                        <!-- æœåŠ¡å™¨é…ç½®åˆ—è¡¨å°†åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-secondary" onclick="showAddServerDialog()" style="flex: 1;">
                            æ·»åŠ æœåŠ¡å™¨
                        </button>
                        <button class="btn btn-secondary" onclick="showQuickServerSwitch()" style="flex: 1;">
                            å¿«é€Ÿåˆ‡æ¢
                        </button>
                    </div>
                </div>
                
                <div class="input-group" style="margin-top: 20px;">
                    <label for="serverInput">å½“å‰æœåŠ¡å™¨åœ°å€</label>
                    <input 
                        type="text" 
                        id="serverInput" 
                        placeholder="ä¾‹å¦‚ï¼šhttp://192.168.1.100:3000"
                        value="http://localhost:3000"
                    >
                    <div class="input-hint">æ¯ä¸ªå›¢é˜Ÿå¯ä»¥é…ç½®ä¸åŒçš„æœåŠ¡å™¨åœ°å€ï¼Œé…ç½®ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨</div>
                </div>
                
                <div style="display: flex; gap: 8px;">
                    <button class="btn btn-primary" onclick="saveSettings()" style="flex: 1;">
                        ä¿å­˜å½“å‰é…ç½®
                    </button>
                    <button class="btn btn-secondary" onclick="testServerConnection()" style="flex: 1;">
                        æµ‹è¯•è¿æ¥
                    </button>
                </div>
                
                <!-- å¯†ç ç®¡ç† -->
                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border-color);">
                    <h4 style="margin: 0 0 10px 0; color: var(--text-primary); font-size: 15px; font-weight: 600;">
                        å¯†ç ç®¡ç†
                    </h4>
                    
                    <!-- å¯†ç ä¿®æ”¹è¡¨å• -->
                    <div id="passwordChangeForm" style="display: none; background: var(--bg-tertiary); padding: 16px; border-radius: 12px; margin-bottom: 15px; border: 1px solid var(--border-color);">
                        <div class="input-group" style="margin-bottom: 12px;">
                            <label for="currentPasswordInput">å½“å‰å¯†ç </label>
                            <input 
                                type="password" 
                                id="currentPasswordInput" 
                                placeholder="è¯·è¾“å…¥å½“å‰å¯†ç "
                                style="font-family: 'Consolas', monospace;"
                            >
                        </div>
                        <div class="input-group" style="margin-bottom: 12px;">
                            <label for="newPasswordInput">æ–°å¯†ç </label>
                            <input 
                                type="password" 
                                id="newPasswordInput" 
                                placeholder="è¯·è¾“å…¥æ–°å¯†ç ï¼ˆ6-20ä½ï¼‰"
                                style="font-family: 'Consolas', monospace;"
                            >
                            <div class="input-hint" id="passwordStrength"></div>
                        </div>
                        <div class="input-group" style="margin-bottom: 12px;">
                            <label for="confirmPasswordInput">ç¡®è®¤å¯†ç </label>
                            <input 
                                type="password" 
                                id="confirmPasswordInput" 
                                placeholder="è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç "
                                style="font-family: 'Consolas', monospace;"
                            >
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-primary" onclick="submitPasswordChange()" style="flex: 1;">
                                ç¡®è®¤ä¿®æ”¹
                            </button>
                            <button class="btn btn-secondary" onclick="cancelPasswordChange()" style="flex: 1;">
                                å–æ¶ˆ
                            </button>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <button class="btn btn-secondary" onclick="showPasswordChangeForm()" style="flex: 1; min-width: 150px;">
                            ä¿®æ”¹å¯†ç 
                        </button>
                        <button class="btn btn-secondary" onclick="resetAdminPassword()" style="flex: 1; min-width: 150px;">
                            é‡ç½®å¯†ç 
                        </button>
                    </div>
                    <div class="info-box" style="margin-top: 10px;">
                        <strong>å¯†ç è¯´æ˜</strong><br>
                        â€¢ é»˜è®¤å¯†ç ï¼š321123<br>
                        â€¢ ä¿®æ”¹åçš„å¯†ç ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨<br>
                        â€¢ å¿˜è®°å¯†ç å¯ç‚¹å‡»"é‡ç½®å¯†ç "æ¢å¤é»˜è®¤
                    </div>
                </div>
                
                <!-- Downloadsè·¯å¾„é…ç½® -->
                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border-color);">
                    <h4 style="margin: 0 0 10px 0; color: var(--text-primary); font-size: 15px; font-weight: 600;">
                        ä¸‹è½½ç›®å½•é…ç½®
                    </h4>
                    <div class="input-group">
                        <label for="downloadsPathInput">ä¸‹è½½æ–‡ä»¶å¤¹è·¯å¾„</label>
                        <input 
                            type="text" 
                            id="downloadsPathInput" 
                            placeholder="ä¾‹å¦‚ï¼šC:\Downloads æˆ– /home/user/Downloads"
                            style="font-family: 'Consolas', monospace;"
                        >
                        <div class="input-hint" id="downloadsPathStatus">
                            å½“å‰è·¯å¾„ï¼šåŠ è½½ä¸­...
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px;">
                        <button class="btn btn-primary" onclick="setDownloadsPath()" style="flex: 1; min-width: 150px;">
                            ä¿å­˜è·¯å¾„
                        </button>
                        <button class="btn btn-secondary" onclick="loadDownloadsPath()" style="flex: 1; min-width: 150px;">
                            åˆ·æ–°
                        </button>
                    </div>
                    <div class="info-box" style="margin-top: 10px;">
                        <strong>è·¯å¾„è¯´æ˜</strong><br>
                        â€¢ Windowsç¤ºä¾‹ï¼š<code>C:\Downloads</code> æˆ– <code>D:\ç´ æ\ä¸‹è½½</code><br>
                        â€¢ Linux/Macç¤ºä¾‹ï¼š<code>/home/user/Downloads</code><br>
                        â€¢ ç›¸å¯¹è·¯å¾„ï¼š<code>Downloads</code>ï¼ˆæœåŠ¡å™¨ç›®å½•ä¸‹ï¼‰<br>
                        â€¢ è·¯å¾„ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œè¯·ç¡®ä¿æœ‰å†™å…¥æƒé™
                    </div>
                </div>
                
                <div class="info-box" style="margin-top: 15px; background: white;">
                    <strong>ğŸ“‹ æœåŠ¡å™¨éƒ¨ç½²</strong><br>
                    æœ¬åœ°éƒ¨ç½²ï¼šç›´æ¥å¯åŠ¨å³å¯<br>
                    è¿œç¨‹éƒ¨ç½²ï¼šä¿®æ”¹æœåŠ¡å™¨åœ°å€ä¸ºè¿œç¨‹IP<br>
                    <code style="background: #e0e7ff; padding: 6px 12px; border-radius: 6px; display: inline-block; margin-top: 10px; font-family: 'Consolas', monospace; color: #6366f1; font-weight: 600;">
                        cd server && npm install && node server-browser.js
                    </code>
                </div>
            </div>
            
            </div><!-- å…³é—­ admin-content -->
        </div><!-- å…³é—­ adminTab -->
        
    </div>
    
    <script>
        let serverUrl = localStorage.getItem('serverUrl') || 'http://localhost:3000';
        let currentTab = 'member';
        
        // ç®¡ç†å‘˜å¯†ç ç®¡ç†ï¼ˆé»˜è®¤å¯†ç ï¼š321123ï¼‰
        const DEFAULT_PASSWORD = '321123';
        let ADMIN_PASSWORD = localStorage.getItem('adminPassword') || DEFAULT_PASSWORD;
        let isAdminUnlocked = false; // ç®¡ç†å‘˜æ˜¯å¦å·²éªŒè¯
        
        // ç®¡ç†å‘˜å¯†ç éªŒè¯
        function verifyAdminPassword() {
            const input = document.getElementById('adminPasswordInput').value;
            const btn = document.getElementById('adminVerifyBtn');
            
            if (!input) {
                alert('âŒ è¯·è¾“å…¥å¯†ç ');
                return;
            }
            
            if (input === ADMIN_PASSWORD) {
                // éªŒè¯æˆåŠŸ
                isAdminUnlocked = true;
                document.getElementById('adminAuthLayer').style.display = 'none';
                document.getElementById('adminContent').classList.add('unlocked');
                
                // ä¿å­˜ä¼šè¯çŠ¶æ€ï¼ˆå…³é—­é¡µé¢åéœ€è¦é‡æ–°éªŒè¯ï¼‰
                sessionStorage.setItem('adminUnlocked', 'true');
                
                // åŠ è½½Downloadsè·¯å¾„é…ç½®
                loadDownloadsPath();
            } else {
                // éªŒè¯å¤±è´¥
                alert('âŒ å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•');
                document.getElementById('adminPasswordInput').value = '';
                document.getElementById('adminPasswordInput').focus();
            }
        }
        
        // æ˜¾ç¤ºå¯†ç ä¿®æ”¹è¡¨å•
        function showPasswordChangeForm() {
            const form = document.getElementById('passwordChangeForm');
            form.style.display = 'block';
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            document.getElementById('currentPasswordInput').value = '';
            document.getElementById('newPasswordInput').value = '';
            document.getElementById('confirmPasswordInput').value = '';
            document.getElementById('passwordStrength').innerHTML = '';
            
            // èšç„¦åˆ°ç¬¬ä¸€ä¸ªè¾“å…¥æ¡†
            document.getElementById('currentPasswordInput').focus();
        }
        
        // å–æ¶ˆå¯†ç ä¿®æ”¹
        function cancelPasswordChange() {
            document.getElementById('passwordChangeForm').style.display = 'none';
        }
        
        // æ£€æŸ¥å¯†ç å¼ºåº¦
        function checkPasswordStrength(password) {
            const strengthHint = document.getElementById('passwordStrength');
            
            if (!password) {
                strengthHint.innerHTML = '';
                return;
            }
            
            if (password.length < 6) {
                strengthHint.innerHTML = 'âš ï¸ å¯†ç å¤ªçŸ­ï¼ˆè‡³å°‘6ä½ï¼‰';
                strengthHint.style.color = '#dc2626';
                return 'weak';
            }
            
            if (password.length > 20) {
                strengthHint.innerHTML = 'âš ï¸ å¯†ç å¤ªé•¿ï¼ˆæœ€å¤š20ä½ï¼‰';
                strengthHint.style.color = '#dc2626';
                return 'invalid';
            }
            
            let strength = 0;
            if (/[a-z]/.test(password)) strength++;
            if (/[A-Z]/.test(password)) strength++;
            if (/[0-9]/.test(password)) strength++;
            if (/[^a-zA-Z0-9]/.test(password)) strength++;
            
            if (strength <= 1) {
                strengthHint.innerHTML = 'ğŸ’› å¯†ç å¼ºåº¦ï¼šå¼±';
                strengthHint.style.color = '#f59e0b';
                return 'weak';
            } else if (strength === 2) {
                strengthHint.innerHTML = 'ğŸ’š å¯†ç å¼ºåº¦ï¼šä¸­';
                strengthHint.style.color = '#10b981';
                return 'medium';
            } else {
                strengthHint.innerHTML = 'ğŸ’™ å¯†ç å¼ºåº¦ï¼šå¼º';
                strengthHint.style.color = '#3b82f6';
                return 'strong';
            }
        }
        
        // æäº¤å¯†ç ä¿®æ”¹
        function submitPasswordChange() {
            const currentPassword = document.getElementById('currentPasswordInput').value;
            const newPassword = document.getElementById('newPasswordInput').value;
            const confirmPassword = document.getElementById('confirmPasswordInput').value;
            
            // éªŒè¯å½“å‰å¯†ç 
            if (!currentPassword) {
                alert('âŒ è¯·è¾“å…¥å½“å‰å¯†ç ');
                document.getElementById('currentPasswordInput').focus();
                return;
            }
            
            if (currentPassword !== ADMIN_PASSWORD) {
                alert('âŒ å½“å‰å¯†ç é”™è¯¯');
                document.getElementById('currentPasswordInput').value = '';
                document.getElementById('currentPasswordInput').focus();
                return;
            }
            
            // éªŒè¯æ–°å¯†ç 
            if (!newPassword) {
                alert('âŒ è¯·è¾“å…¥æ–°å¯†ç ');
                document.getElementById('newPasswordInput').focus();
                return;
            }
            
            if (newPassword.length < 6 || newPassword.length > 20) {
                alert('âŒ å¯†ç é•¿åº¦å¿…é¡»åœ¨6-20ä½ä¹‹é—´');
                document.getElementById('newPasswordInput').focus();
                return;
            }
            
            // éªŒè¯ç¡®è®¤å¯†ç 
            if (!confirmPassword) {
                alert('âŒ è¯·ç¡®è®¤æ–°å¯†ç ');
                document.getElementById('confirmPasswordInput').focus();
                return;
            }
            
            if (confirmPassword !== newPassword) {
                alert('âŒ ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´');
                document.getElementById('confirmPasswordInput').value = '';
                document.getElementById('confirmPasswordInput').focus();
                return;
            }
            
            // ä¿å­˜æ–°å¯†ç 
            ADMIN_PASSWORD = newPassword;
            localStorage.setItem('adminPassword', newPassword);
            
            // éšè—è¡¨å•
            document.getElementById('passwordChangeForm').style.display = 'none';
            
            alert('âœ… å¯†ç ä¿®æ”¹æˆåŠŸï¼\n\nè¯·å¦¥å–„ä¿ç®¡æ–°å¯†ç ã€‚');
        }
        
        // é‡ç½®ç®¡ç†å‘˜å¯†ç 
        function resetAdminPassword() {
            if (!confirm('ç¡®å®šè¦é‡ç½®å¯†ç ä¸ºé»˜è®¤å¯†ç å—ï¼Ÿ\n\né»˜è®¤å¯†ç ï¼š321123')) {
                return;
            }
            
            ADMIN_PASSWORD = DEFAULT_PASSWORD;
            localStorage.setItem('adminPassword', DEFAULT_PASSWORD);
            
            alert('âœ… å¯†ç å·²é‡ç½®ä¸ºé»˜è®¤å¯†ç ï¼š321123');
        }
        
        // åŠ è½½Downloadsè·¯å¾„
        async function loadDownloadsPath() {
            try {
                const response = await fetch(`${serverUrl}/api/config/downloads`);
                const data = await response.json();
                
                const input = document.getElementById('downloadsPathInput');
                const status = document.getElementById('downloadsPathStatus');
                
                if (response.ok) {
                    input.value = data.downloadsPath;
                    status.innerHTML = `ğŸ’¡ å½“å‰è·¯å¾„ï¼š<code style="background: #dbeafe; padding: 2px 6px; border-radius: 4px;">${data.downloadsPath}</code> ${data.exists ? 'âœ…' : 'âš ï¸ ç›®å½•ä¸å­˜åœ¨'}`;
                    status.style.color = data.exists ? '#047857' : '#dc2626';
                } else {
                    status.innerHTML = 'âŒ æ— æ³•è·å–è·¯å¾„é…ç½®';
                    status.style.color = '#dc2626';
                }
            } catch (error) {
                console.error('åŠ è½½Downloadsè·¯å¾„å¤±è´¥:', error);
                document.getElementById('downloadsPathStatus').innerHTML = 'âŒ æœåŠ¡å™¨è¿æ¥å¤±è´¥';
                document.getElementById('downloadsPathStatus').style.color = '#dc2626';
            }
        }
        
        // è®¾ç½®Downloadsè·¯å¾„
        async function setDownloadsPath() {
            const input = document.getElementById('downloadsPathInput');
            const downloadsPath = input.value.trim();
            
            if (!downloadsPath) {
                alert('âŒ è¯·è¾“å…¥ä¸‹è½½è·¯å¾„');
                return;
            }
            
            try {
                const response = await fetch(`${serverUrl}/api/config/downloads`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ downloadsPath })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    alert(`âœ… ${data.message}\n\næ–°è·¯å¾„ï¼š${data.downloadsPath}`);
                    await loadDownloadsPath(); // é‡æ–°åŠ è½½æ˜¾ç¤º
                } else {
                    alert(`âŒ ${data.message}`);
                }
            } catch (error) {
                console.error('è®¾ç½®Downloadsè·¯å¾„å¤±è´¥:', error);
                alert('âŒ è®¾ç½®å¤±è´¥ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨è¿æ¥');
            }
        }
        
        // æ”¯æŒå›è½¦é”®éªŒè¯
        document.addEventListener('DOMContentLoaded', function() {
            const passwordInput = document.getElementById('adminPasswordInput');
            if (passwordInput) {
                passwordInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        verifyAdminPassword();
                    }
                });
            }
            
            // æ–°å¯†ç è¾“å…¥æ¡†å®æ—¶æ£€æµ‹å¼ºåº¦
            const newPasswordInput = document.getElementById('newPasswordInput');
            if (newPasswordInput) {
                newPasswordInput.addEventListener('input', function(e) {
                    checkPasswordStrength(e.target.value);
                });
                
                // æ”¯æŒå›è½¦é”®è·³è½¬åˆ°ä¸‹ä¸€ä¸ªè¾“å…¥æ¡†
                newPasswordInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        document.getElementById('confirmPasswordInput').focus();
                    }
                });
            }
            
            // å½“å‰å¯†ç è¾“å…¥æ¡†å›è½¦è·³è½¬
            const currentPasswordInput = document.getElementById('currentPasswordInput');
            if (currentPasswordInput) {
                currentPasswordInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        document.getElementById('newPasswordInput').focus();
                    }
                });
            }
            
            // ç¡®è®¤å¯†ç è¾“å…¥æ¡†å›è½¦æäº¤
            const confirmPasswordInput = document.getElementById('confirmPasswordInput');
            if (confirmPasswordInput) {
                confirmPasswordInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        submitPasswordChange();
                    }
                });
            }
            
            // æ£€æŸ¥ä¼šè¯çŠ¶æ€
            if (sessionStorage.getItem('adminUnlocked') === 'true') {
                isAdminUnlocked = true;
                document.getElementById('adminAuthLayer').style.display = 'none';
                document.getElementById('adminContent').classList.add('unlocked');
            }
        });
        
        // å¤šæœåŠ¡å™¨é…ç½®ç®¡ç†
        function getServerConfigs() {
            const configs = localStorage.getItem('serverConfigs');
            return configs ? JSON.parse(configs) : [];
        }
        
        function saveServerConfigs(configs) {
            localStorage.setItem('serverConfigs', JSON.stringify(configs));
        }
        
        function addServerConfig(name, url) {
            const configs = getServerConfigs();
            // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
            if (configs.some(c => c.url === url)) {
                alert('è¯¥æœåŠ¡å™¨åœ°å€å·²å­˜åœ¨');
                return false;
            }
            configs.push({ name, url, createdAt: new Date().toISOString() });
            saveServerConfigs(configs);
            renderServerConfigList();
            return true;
        }
        
        function removeServerConfig(url) {
            const configs = getServerConfigs();
            const filtered = configs.filter(c => c.url !== url);
            saveServerConfigs(filtered);
            renderServerConfigList();
        }
        
        function switchToServer(url) {
            serverUrl = url;
            localStorage.setItem('serverUrl', serverUrl);
            document.getElementById('serverInput').value = serverUrl;
            updateServerUrlDisplay();
            checkConnection();
            alert('âœ… å·²åˆ‡æ¢åˆ°: ' + url);
        }
        
        function renderServerConfigList() {
            const container = document.getElementById('serverConfigList');
            const configs = getServerConfigs();
            
            if (configs.length === 0) {
                container.innerHTML = '<div style="padding: 12px; background: rgba(255,255,255,0.5); border-radius: 8px; color: var(--text-secondary); font-size: 13px; text-align: center;">æš‚æ— ä¿å­˜çš„æœåŠ¡å™¨é…ç½®</div>';
                return;
            }
            
            container.innerHTML = configs.map((config, index) => {
                const isCurrent = config.url === serverUrl;
                return `
                    <div style="display: flex; align-items: center; gap: 8px; padding: 10px; background: ${isCurrent ? 'rgba(99, 102, 241, 0.1)' : 'rgba(255,255,255,0.5)'}; border-radius: 8px; margin-bottom: 8px; border: ${isCurrent ? '2px solid #6366f1' : '1px solid rgba(0,0,0,0.1)'};">
                        <div style="flex: 1;">
                            <div style="font-weight: 500; color: var(--text-primary); font-size: 14px;">
                                ${config.name || 'æœªå‘½åæœåŠ¡å™¨'}
                                ${isCurrent ? '<span style="color: #6366f1; font-size: 11px; margin-left: 6px;">(å½“å‰)</span>' : ''}
                            </div>
                            <div style="font-size: 12px; color: var(--text-secondary); margin-top: 2px;">
                                ${config.url}
                            </div>
                        </div>
                        <div style="display: flex; gap: 4px;">
                            ${!isCurrent ? `<button onclick="switchToServer('${config.url}')" style="padding: 4px 8px; background: #6366f1; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px;">åˆ‡æ¢</button>` : ''}
                            <button onclick="removeServerConfig('${config.url}')" style="padding: 4px 8px; background: #ef4444; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px;">åˆ é™¤</button>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function showAddServerDialog() {
            const name = prompt('è¯·è¾“å…¥æœåŠ¡å™¨åç§°ï¼ˆä¾‹å¦‚ï¼šå›¢é˜ŸAæœåŠ¡å™¨ï¼‰:');
            if (!name) return;
            
            const url = prompt('è¯·è¾“å…¥æœåŠ¡å™¨åœ°å€ï¼ˆä¾‹å¦‚ï¼šhttp://192.168.1.100:3000ï¼‰:');
            if (!url) return;
            
            // éªŒè¯URLæ ¼å¼
            try {
                new URL(url);
            } catch (e) {
                alert('âŒ æœåŠ¡å™¨åœ°å€æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·åŒ…å« http:// æˆ– https://');
                return;
            }
            
            if (addServerConfig(name.trim(), url.trim())) {
                alert('âœ… æœåŠ¡å™¨é…ç½®å·²æ·»åŠ ');
            }
        }
        
        function showQuickServerSwitch() {
            const configs = getServerConfigs();
            if (configs.length === 0) {
                alert('æš‚æ— ä¿å­˜çš„æœåŠ¡å™¨é…ç½®ï¼Œè¯·å…ˆæ·»åŠ ');
                return;
            }
            
            const options = configs.map((c, i) => `${i + 1}. ${c.name || 'æœªå‘½å'} (${c.url})`).join('\n');
            const choice = prompt(`è¯·é€‰æ‹©è¦åˆ‡æ¢çš„æœåŠ¡å™¨:\n\n${options}\n\nè¯·è¾“å…¥åºå·:`);
            
            if (!choice) return;
            
            const index = parseInt(choice) - 1;
            if (index >= 0 && index < configs.length) {
                switchToServer(configs[index].url);
            } else {
                alert('âŒ æ— æ•ˆçš„åºå·');
            }
        }
        
        function showServerConfig() {
            // åˆ‡æ¢åˆ°ç®¡ç†å‘˜æ ‡ç­¾å¹¶æ˜¾ç¤ºæœåŠ¡å™¨é…ç½®
            switchTab('admin');
            // å¦‚æœæœªè§£é”ï¼Œæç¤ºè§£é”
            if (!isAdminUnlocked) {
                alert('ğŸ’¡ è¯·å…ˆè¾“å…¥ç®¡ç†å‘˜å¯†ç è§£é”ï¼Œç„¶ååœ¨"ç³»ç»Ÿè®¾ç½®"ä¸­é…ç½®æœåŠ¡å™¨');
            }
        }
        
        function testServerConnection() {
            const url = document.getElementById('serverInput').value.trim();
            if (!url) {
                alert('è¯·è¾“å…¥æœåŠ¡å™¨åœ°å€');
                return;
            }
            
            // éªŒè¯URLæ ¼å¼
            try {
                new URL(url);
            } catch (e) {
                alert('âŒ æœåŠ¡å™¨åœ°å€æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·åŒ…å« http:// æˆ– https://');
                return;
            }
            
            // æµ‹è¯•è¿æ¥
            fetch(`${url}/api/health`)
                .then(res => res.json())
                .then(data => {
                    if (data.status === 'ok') {
                        alert('âœ… è¿æ¥æˆåŠŸï¼\n\næœåŠ¡å™¨çŠ¶æ€: æ­£å¸¸\næµè§ˆå™¨å°±ç»ª: ' + (data.browserReady ? 'æ˜¯' : 'å¦'));
                    } else {
                        alert('âš ï¸ æœåŠ¡å™¨å“åº”å¼‚å¸¸');
                    }
                })
                .catch(error => {
                    alert('âŒ è¿æ¥å¤±è´¥\n\nå¯èƒ½çš„åŸå› :\n1. æœåŠ¡å™¨æœªå¯åŠ¨\n2. åœ°å€ä¸æ­£ç¡®\n3. ç½‘ç»œä¸é€š\n\né”™è¯¯: ' + error.message);
                });
        }
        
        function updateServerUrlDisplay() {
            const display = document.getElementById('serverUrlDisplay');
            if (display) {
                display.textContent = serverUrl;
            }
        }
        
        // åˆå§‹åŒ–
        document.getElementById('serverInput').value = serverUrl;
        updateServerUrlDisplay();
        renderServerConfigList();
        switchTab('member');
        checkConnection();
        
        // ğŸ¯ ç§»é™¤å®šæ—¶åˆ·æ–°ï¼Œæ”¹ä¸ºä»…åœ¨è§£æç´ æåæ›´æ–°é…é¢
        // è§£ææˆåŠŸåä¼šè‡ªåŠ¨è°ƒç”¨ updateDownloadQuota()
        
        // åˆ‡æ¢æ ‡ç­¾
        function switchTab(tab) {
            currentTab = tab;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.tab-btn').forEach((btn, index) => {
                btn.classList.remove('active');
                if ((index === 0 && tab === 'member') ||
                    (index === 1 && tab === 'admin')) {
                    btn.classList.add('active');
                }
            });
            
            // æ›´æ–°å†…å®¹
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tab + 'Tab').classList.add('active');
            
            // åˆ‡æ¢åˆ°ç®¡ç†å‘˜æ ‡ç­¾ä¸”å·²éªŒè¯æ—¶ï¼ŒåŠ è½½Downloadsè·¯å¾„å’ŒæœåŠ¡å™¨é…ç½®
            if (tab === 'admin' && isAdminUnlocked) {
                loadDownloadsPath();
                renderServerConfigList();
            }
        }
        
        // ä¿å­˜è®¾ç½®
        function saveSettings() {
            const input = document.getElementById('serverInput').value.trim();
            if (!input) {
                alert('è¯·è¾“å…¥æœåŠ¡å™¨åœ°å€');
                return;
            }
            
            // éªŒè¯URLæ ¼å¼
            try {
                new URL(input);
            } catch (e) {
                alert('âŒ æœåŠ¡å™¨åœ°å€æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·åŒ…å« http:// æˆ– https://');
                return;
            }
            
            serverUrl = input;
            localStorage.setItem('serverUrl', serverUrl);
            updateServerUrlDisplay();
            
            // å¦‚æœè¯¥æœåŠ¡å™¨ä¸åœ¨é…ç½®åˆ—è¡¨ä¸­ï¼Œæç¤ºæ˜¯å¦ä¿å­˜
            const configs = getServerConfigs();
            if (!configs.some(c => c.url === serverUrl)) {
                const save = confirm('æ˜¯å¦å°†æ­¤æœåŠ¡å™¨ä¿å­˜åˆ°é…ç½®åˆ—è¡¨ï¼Ÿ\n\nç‚¹å‡»"ç¡®å®š"ä¿å­˜ï¼Œç‚¹å‡»"å–æ¶ˆ"ä»…ä¸´æ—¶ä½¿ç”¨');
                if (save) {
                    const name = prompt('è¯·è¾“å…¥æœåŠ¡å™¨åç§°ï¼ˆä¾‹å¦‚ï¼šå›¢é˜ŸAæœåŠ¡å™¨ï¼‰:', 'æœåŠ¡å™¨ ' + (configs.length + 1));
                    if (name) {
                        addServerConfig(name.trim(), serverUrl);
                    }
                }
            }
            
            checkConnection();
            alert('âœ… è®¾ç½®å·²ä¿å­˜');
        }
        
        // æ£€æŸ¥è¿æ¥
        async function checkConnection() {
            try {
                const res = await fetch(`${serverUrl}/api/health`);
                const data = await res.json();
                
                if (data.status === 'ok') {
                    updateStatus(true, 'å·²è¿æ¥');
                    
                    // åŒæ­¥èŠ±ç“£ç½‘ç™»å½•çŠ¶æ€åˆ°UI
                    if (data.isLoggedIn !== undefined) {
                        updateHuabanLoginUI(data.isLoggedIn);
                    }
                    
                    // æ£€æŸ¥è§…å…ƒç´ ç™»å½•çŠ¶æ€
                    try {
                        const yuansuRes = await fetch(`${serverUrl}/api/yuansu/status`);
                        const yuansuData = await yuansuRes.json();
                        console.log('ğŸ” è§…å…ƒç´ çŠ¶æ€æ£€æŸ¥ç»“æœ:', yuansuData);
                        updateYuansuLoginUI(yuansuData.isLoggedIn);
                    } catch (error) {
                        // è§…å…ƒç´ çŠ¶æ€æ£€æŸ¥å¤±è´¥ï¼Œå¯èƒ½åŠŸèƒ½æœªåˆå§‹åŒ–ï¼Œè®¾ç½®ä¸ºæœªç™»å½•
                        console.log('âš ï¸  è§…å…ƒç´ çŠ¶æ€æ£€æŸ¥å¤±è´¥:', error);
                        updateYuansuLoginUI(false); // é‡è¦ï¼šè®¾ç½®ä¸ºæœªç™»å½•çŠ¶æ€
                    }
                    
                    // æ£€æŸ¥90è®¾è®¡ç™»å½•çŠ¶æ€
                    try {
                        const ninetyShejieRes = await fetch(`${serverUrl}/api/90sheji/status`);
                        const ninetyShejieData = await ninetyShejieRes.json();
                        console.log('ğŸ” 90è®¾è®¡çŠ¶æ€æ£€æŸ¥ç»“æœ:', ninetyShejieData);
                        updateNinetyShejieLoginUI(ninetyShejieData.isLoggedIn);
                    } catch (error) {
                        // 90è®¾è®¡çŠ¶æ€æ£€æŸ¥å¤±è´¥ï¼Œå¯èƒ½åŠŸèƒ½æœªåˆå§‹åŒ–ï¼Œè®¾ç½®ä¸ºæœªç™»å½•
                        console.log('âš ï¸  90è®¾è®¡çŠ¶æ€æ£€æŸ¥å¤±è´¥:', error);
                        updateNinetyShejieLoginUI(false);
                    }
                    
                    // æ£€æŸ¥äº«è®¾è®¡ç™»å½•çŠ¶æ€
                    try {
                        const design006Res = await fetch(`${serverUrl}/api/design006/status`);
                        const design006Data = await design006Res.json();
                        console.log('ğŸ” äº«è®¾è®¡çŠ¶æ€æ£€æŸ¥ç»“æœ:', design006Data);
                        updateDesign006LoginUI(design006Data.isLoggedIn);
                    } catch (error) {
                        // äº«è®¾è®¡çŠ¶æ€æ£€æŸ¥å¤±è´¥ï¼Œå¯èƒ½åŠŸèƒ½æœªåˆå§‹åŒ–ï¼Œè®¾ç½®ä¸ºæœªç™»å½•
                        console.log('âš ï¸  äº«è®¾è®¡çŠ¶æ€æ£€æŸ¥å¤±è´¥:', error);
                        updateDesign006LoginUI(false);
                    }
                    
                    // è·å–ä¸‹è½½æ¬¡æ•°ä¿¡æ¯
                    await updateDownloadQuota();
                } else {
                    updateStatus(false, 'æœåŠ¡å™¨æœªå°±ç»ª');
                    // æœåŠ¡å™¨æœªå°±ç»ªæ—¶ï¼Œé‡ç½®ç™»å½•çŠ¶æ€
                    updateHuabanLoginUI(false);
                    updateYuansuLoginUI(false);
                    updateNinetyShejieLoginUI(false);
                }
            } catch (error) {
                updateStatus(false, 'æœªè¿æ¥');
                // è¿æ¥å¤±è´¥æ—¶ï¼Œé‡ç½®ç™»å½•çŠ¶æ€
                updateHuabanLoginUI(false);
                updateYuansuLoginUI(false);
                updateNinetyShejieLoginUI(false);
            }
        }
        
        // æ›´æ–°ä¸‹è½½é…é¢æ˜¾ç¤º
        async function updateDownloadQuota() {
            try {
                const res = await fetch(`${serverUrl}/api/downloads/daily-quota`);
                const result = await res.json();
                
                if (!result.success) {
                    throw new Error(result.message || 'è·å–é…é¢å¤±è´¥');
                }
                
                const data = result.data;
                
                // ğŸ” æ·»åŠ è°ƒè¯•æ—¥å¿—
                console.log('ğŸ“Š [å‰ç«¯] æ”¶åˆ°èŠ±ç“£ç½‘é…é¢æ•°æ®:', {
                    used: data.huaban?.used,
                    limit: data.huaban?.limit,
                    remaining: data.huaban?.remaining
                });
                
                // æ˜¾ç¤ºé…é¢å®¹å™¨
                const quotaContainer = document.getElementById('quotaContainer');
                quotaContainer.style.display = 'grid';
                
                // æ›´æ–°èŠ±ç“£ç½‘é…é¢å¡ç‰‡
                if (data.huaban) {
                    const huabanRemaining = document.getElementById('huabanRemaining');
                    const huabanTotal = document.getElementById('huabanTotal');
                    const huabanProgressBar = document.getElementById('huabanProgressBar');
                    
                    // ğŸ¯ æ˜¾ç¤ºå·²ä½¿ç”¨æ¬¡æ•°ï¼Œè€Œä¸æ˜¯å‰©ä½™æ¬¡æ•°
                    huabanRemaining.textContent = data.huaban.used;
                    huabanTotal.textContent = data.huaban.limit;
                    
                    // ğŸ¯ è®¡ç®—èŠ±ç“£ç½‘å·²ä½¿ç”¨ç™¾åˆ†æ¯”
                    const usedPercentage = (data.huaban.used / data.huaban.limit) * 100;
                    huabanProgressBar.style.width = usedPercentage + '%';
                    
                    console.log('ğŸ“Š é…é¢å¡ç‰‡æ›´æ–° - èŠ±ç“£ç½‘:', {
                        used: data.huaban.used,
                        limit: data.huaban.limit,
                        remaining: data.huaban.remaining,
                        percentage: usedPercentage.toFixed(1) + '%'
                    });
                }
                
                // æ›´æ–°äº«è®¾è®¡é…é¢å¡ç‰‡
                if (data.design006) {
                    const design006Remaining = document.getElementById('design006Remaining');
                    const design006Total = document.getElementById('design006Total');
                    const design006ProgressBar = document.getElementById('design006ProgressBar');
                    
                    if (design006Remaining && design006Total && design006ProgressBar) {
                        // ğŸ¯ æ˜¾ç¤ºå·²ä½¿ç”¨æ¬¡æ•°ï¼Œè€Œä¸æ˜¯å‰©ä½™æ¬¡æ•°
                        design006Remaining.textContent = data.design006.used;
                        design006Total.textContent = data.design006.limit;
                        
                        // ğŸ¯ è®¡ç®—äº«è®¾è®¡å·²ä½¿ç”¨ç™¾åˆ†æ¯”
                        const usedPercentage = (data.design006.used / data.design006.limit) * 100;
                        design006ProgressBar.style.width = usedPercentage + '%';
                        
                        console.log('ğŸ“Š é…é¢å¡ç‰‡æ›´æ–° - äº«è®¾è®¡:', {
                            used: data.design006.used,
                            limit: data.design006.limit,
                            remaining: data.design006.remaining,
                            percentage: usedPercentage.toFixed(1) + '%'
                        });
                    }
                }
                
                // æ›´æ–°è§…å…ƒç´ é…é¢å¡ç‰‡ï¼ˆæ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯ï¼‰
                if (data.yuansu) {
                    const yuansuRemaining = document.getElementById('yuansuRemaining');
                    const yuansuStatus = document.getElementById('yuansuStatus');
                    const yuansuLoggedInContent = document.getElementById('yuansuLoggedInContent');
                    
                    // æ£€æŸ¥æ˜¯å¦å·²ç™»å½•ï¼ˆé€šè¿‡æ£€æŸ¥ç™»å½•å†…å®¹æ˜¯å¦æ˜¾ç¤ºï¼‰
                    const isLoggedIn = yuansuLoggedInContent && yuansuLoggedInContent.style.display !== 'none';
                    
                    if (isLoggedIn) {
                        // å·²ç™»å½•æ—¶æ‰æ›´æ–°æ•°æ®
                        if (yuansuRemaining) {
                            yuansuRemaining.textContent = data.yuansu.used;
                        }
                        
                        // ğŸ¯ æ›´æ–°çŠ¶æ€æ–‡æœ¬ä¸º"å·²ç™»å½•"ï¼Œä½¿ç”¨è§…å…ƒç´ ä¸“å±é¢œè‰²
                        if (yuansuStatus) {
                            yuansuStatus.textContent = 'å·²ç™»å½•';
                            yuansuStatus.className = 'quota-status yuansu-logged';
                        }
                        
                        console.log('ğŸ“Š é…é¢å¡ç‰‡æ›´æ–° - è§…å…ƒç´ :', {
                            used: data.yuansu.used,
                            total: data.yuansu.total
                        });
                    } else {
                        // æœªç™»å½•æ—¶ä¿æŒ"æœªç™»å½•"çŠ¶æ€
                        if (yuansuStatus && yuansuStatus.textContent !== 'æœªç™»å½•') {
                            yuansuStatus.textContent = 'æœªç™»å½•';
                            yuansuStatus.className = 'quota-status limited';
                        }
                    }
                }
                
                // æ›´æ–°90è®¾è®¡é…é¢å¡ç‰‡ï¼ˆæ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯ï¼‰
                if (data.ninetyshejie) {
                    const ninetyshejieRemaining = document.getElementById('ninetyshejieRemaining');
                    const ninetyshejieStatus = document.getElementById('ninetyshejieStatus');
                    const ninetyshejieLoggedInContent = document.getElementById('ninetyshejieLoggedInContent');
                    
                    // æ£€æŸ¥æ˜¯å¦å·²ç™»å½•ï¼ˆé€šè¿‡æ£€æŸ¥ç™»å½•å†…å®¹æ˜¯å¦æ˜¾ç¤ºï¼‰
                    const isLoggedIn = ninetyshejieLoggedInContent && ninetyshejieLoggedInContent.style.display !== 'none';
                    
                    if (isLoggedIn) {
                        // å·²ç™»å½•æ—¶æ‰æ›´æ–°æ•°æ®
                        if (ninetyshejieRemaining) {
                            ninetyshejieRemaining.textContent = data.ninetyshejie.used;
                        }
                        
                        // ğŸ¯ æ›´æ–°çŠ¶æ€æ–‡æœ¬ä¸º"å·²ç™»å½•"ï¼Œä½¿ç”¨90è®¾è®¡ä¸“å±é¢œè‰²
                        if (ninetyshejieStatus) {
                            ninetyshejieStatus.textContent = 'å·²ç™»å½•';
                            ninetyshejieStatus.className = 'quota-status ninetyshejie-logged';
                        }
                        
                        console.log('ğŸ“Š é…é¢å¡ç‰‡æ›´æ–° - 90è®¾è®¡:', {
                            used: data.ninetyshejie.used,
                            total: data.ninetyshejie.total
                        });
                    } else {
                        // æœªç™»å½•æ—¶ä¿æŒ"æœªç™»å½•"çŠ¶æ€
                        if (ninetyshejieStatus && ninetyshejieStatus.textContent !== 'æœªç™»å½•') {
                            ninetyshejieStatus.textContent = 'æœªç™»å½•';
                            ninetyshejieStatus.className = 'quota-status limited';
                        }
                    }
                }
                
            } catch (error) {
                console.error('è·å–ä¸‹è½½é…é¢å¤±è´¥:', error);
                // å³ä½¿è·å–å¤±è´¥ä¹Ÿæ˜¾ç¤ºé…é¢å®¹å™¨ï¼Œå› ä¸ºéœ€è¦æ˜¾ç¤ºç™»å½•çŠ¶æ€
                const quotaContainer = document.getElementById('quotaContainer');
                quotaContainer.style.display = 'grid';
            }
        }
        
        // å¼€å§‹æµè§ˆå™¨ç™»å½•
        async function startBrowserLogin() {
            const btn = document.getElementById('loginBtn');
            btn.disabled = true;
            btn.textContent = 'ğŸ”„ æ­£åœ¨æ‰“å¼€æµè§ˆå™¨...';
            
            try {
                const res = await fetch(`${serverUrl}/api/admin/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });
                
                const data = await res.json();
                
                if (data.success) {
                    alert('âœ… ' + data.message + '\n\nè¯·åœ¨æ‰“å¼€çš„æµè§ˆå™¨çª—å£ä¸­å®Œæˆç™»å½•æ“ä½œã€‚');
                    
                    // å¼€å§‹è½®è¯¢æ£€æŸ¥ç™»å½•çŠ¶æ€
                    startLoginPolling();
                } else {
                    throw new Error(data.error || 'æœªçŸ¥é”™è¯¯');
                }
                
            } catch (error) {
                alert('âŒ æ“ä½œå¤±è´¥ï¼š' + error.message);
                btn.disabled = false;
                btn.textContent = 'ğŸš€ å¼€å§‹ç™»å½•';
            }
        }
        
        // ==================== èŠ±ç“£ç½‘ç™»å½•å‡½æ•° ====================
        
        // èŠ±ç“£ç½‘è´¦å·å¯†ç ç™»å½•
        async function huabanLogin() {
            const account = document.getElementById('huabanAccount').value.trim();
            const password = document.getElementById('huabanPassword').value;
            const btn = document.getElementById('huabanLoginBtn');
            
            if (!account || !password) {
                alert('âŒ è¯·è¾“å…¥è´¦å·å’Œå¯†ç ');
                return;
            }
            
            btn.disabled = true;
            btn.textContent = 'ğŸ”„ æ­£åœ¨ç™»å½•...';
            
            try {
                const res = await fetch(`${serverUrl}/api/admin/login`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ account, password })
                });
                
                const data = await res.json();
                
                if (data.success) {
                    alert('âœ… èŠ±ç“£ç½‘ç™»å½•æˆåŠŸï¼\n\nå›¢é˜Ÿæˆå‘˜ç°åœ¨å¯ä»¥ä½¿ç”¨ä¸‹è½½åŠŸèƒ½äº†ã€‚');
                    
                    // æ›´æ–°UI
                    updateHuabanLoginUI(true);
                    
                    // æ›´æ–°é…é¢æ˜¾ç¤º
                    await updateDownloadQuota();
                    
                    // æ¸…ç©ºè¡¨å•
                    document.getElementById('huabanAccount').value = '';
                    document.getElementById('huabanPassword').value = '';
                } else {
                    throw new Error(data.error || 'ç™»å½•å¤±è´¥');
                }
                
            } catch (error) {
                alert('âŒ èŠ±ç“£ç½‘ç™»å½•å¤±è´¥ï¼š' + error.message);
            } finally {
                btn.disabled = false;
                btn.textContent = 'ğŸ” ç™»å½•èŠ±ç“£ç½‘';
            }
        }
        
        // èŠ±ç“£ç½‘é€€å‡ºç™»å½•
        async function huabanLogout() {
            if (!confirm('ç¡®å®šè¦é€€å‡ºèŠ±ç“£ç½‘ç™»å½•å—ï¼Ÿ\n\né€€å‡ºåå›¢é˜Ÿæˆå‘˜å°†æ— æ³•ä¸‹è½½èŠ±ç“£ç½‘ç´ æã€‚')) {
                return;
            }
            
            const btn = document.getElementById('huabanLogoutBtn');
            const originalText = btn.textContent;
            btn.disabled = true;
            btn.textContent = 'ğŸ”„ æ­£åœ¨é€€å‡º...';
            
            try {
                const res = await fetch(`${serverUrl}/api/admin/logout`, {
                    method: 'POST'
                });
                
                const data = await res.json();
                
                if (data.success) {
                    alert('âœ… å·²é€€å‡ºèŠ±ç“£ç½‘ç™»å½•\n\n' + data.message);
                    
                    // æ›´æ–°UIä¸ºæœªç™»å½•çŠ¶æ€
                    updateHuabanLoginUI(false);
                    updateQuotaCardUI('huaban', false);
                } else {
                    throw new Error(data.error || 'é€€å‡ºå¤±è´¥');
                }
                
            } catch (error) {
                alert('âŒ é€€å‡ºå¤±è´¥ï¼š' + error.message);
            } finally {
                btn.disabled = false;
                btn.textContent = originalText;
            }
        }
        
        // æ›´æ–°èŠ±ç“£ç½‘ç™»å½•UIçŠ¶æ€
        function updateHuabanLoginUI(isLoggedIn) {
            const loggedInSection = document.getElementById('huabanLoggedInSection');
            const loginFormSection = document.getElementById('huabanLoginFormSection');
            
            console.log('ğŸ¨ æ›´æ–°èŠ±ç“£UIçŠ¶æ€:', isLoggedIn ? 'å·²ç™»å½•' : 'æœªç™»å½•');
            
            if (isLoggedIn) {
                // æ˜¾ç¤ºå·²ç™»å½•çŠ¶æ€
                loggedInSection.style.display = 'block';
                loginFormSection.style.display = 'none';
            } else {
                // æ˜¾ç¤ºç™»å½•è¡¨å•
                loggedInSection.style.display = 'none';
                loginFormSection.style.display = 'block';
            }
            
            // æ›´æ–°é…é¢å¡ç‰‡UI
            updateQuotaCardUI('huaban', isLoggedIn);
        }
        
        // æ£€æŸ¥èŠ±ç“£ç½‘ç™»å½•çŠ¶æ€
        async function checkHuabanStatus() {
            try {
                const res = await fetch(`${serverUrl}/api/status`);
                const data = await res.json();
                
                // æ›´æ–°UI
                updateHuabanLoginUI(data.isLoggedIn);
                
                if (data.isLoggedIn) {
                    alert(`âœ… èŠ±ç“£ç½‘å·²ç™»å½•ï¼\n\nCookieæ•°é‡ï¼š${data.cookieCount}\n${data.message}`);
                } else {
                    alert(`âŒ èŠ±ç“£ç½‘æœªç™»å½•\n\n${data.message || 'è¯·å…ˆå®Œæˆç™»å½•'}`);
                }
                
            } catch (error) {
                alert('âŒ æ£€æŸ¥å¤±è´¥ï¼š' + error.message);
            }
        }
        
        // ==================== è§…å…ƒç´ ç™»å½•å‡½æ•° ====================
        
        // è§…å…ƒç´ QQæ‰«ç ç™»å½•
        let yuansuLoginPollInterval = null; // è½®è¯¢å®šæ—¶å™¨
        let yuansuLoginInProgress = false; // ç™»å½•è¿›è¡Œä¸­æ ‡å¿—
        let yuansuLoginSuccessShown = false; // ç™»å½•æˆåŠŸæç¤ºå·²æ˜¾ç¤ºæ ‡å¿—
        
        async function yuansuQrLogin() {
            const btn = document.getElementById('yuansuQrLoginBtn');
            const qrSection = document.getElementById('yuansuQrCodeSection');
            const qrImg = document.getElementById('yuansuQrCodeImg');
            const qrStatus = document.getElementById('yuansuQrCodeStatus');
            
            // å…ˆæ¸…é™¤å¯èƒ½å­˜åœ¨çš„æ—§å®šæ—¶å™¨ï¼Œé˜²æ­¢é‡å¤è½®è¯¢
            if (yuansuLoginPollInterval) {
                console.log('âš ï¸  æ¸…é™¤æ—§çš„è½®è¯¢å®šæ—¶å™¨');
                clearInterval(yuansuLoginPollInterval);
                yuansuLoginPollInterval = null;
            }
            
            // é‡ç½®æ ‡å¿—
            yuansuLoginInProgress = true;
            yuansuLoginSuccessShown = false;
            
            btn.disabled = true;
            btn.textContent = 'ğŸ”„ æ­£åœ¨ç”ŸæˆäºŒç»´ç ...';
            
            try {
                // è°ƒç”¨APIè·å–äºŒç»´ç 
                const res = await fetch(`${serverUrl}/api/yuansu/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        account: 'qr_login',
                        password: 'qr_login' 
                    })
                });
                
                const data = await res.json();
                
                if (data.success && data.waiting && data.qrcode) {
                    // æ˜¾ç¤ºäºŒç»´ç 
                    qrImg.src = data.qrcode;
                    qrSection.style.display = 'block';
                    qrStatus.innerHTML = 'â³ ç­‰å¾…æ‰«ç ...ï¼ˆæœ€å¤š3åˆ†é’Ÿï¼‰';
                    btn.textContent = 'â³ æ‰«ç ä¸­...';
                    
                    console.log('âœ… äºŒç»´ç å·²æ˜¾ç¤º');
                    
                    // ğŸ¯ ç­‰å¾…3ç§’åå†å¼€å§‹è½®è¯¢ï¼Œé¿å…ç«‹å³æ£€æµ‹åˆ°æ—§çš„ç™»å½•çŠ¶æ€
                    console.log('â³ ç­‰å¾…3ç§’åå¼€å§‹è½®è¯¢æ£€æŸ¥ç™»å½•çŠ¶æ€...');
                    await new Promise(resolve => setTimeout(resolve, 3000));
                    
                    // å¼€å§‹è½®è¯¢æ£€æŸ¥ç™»å½•çŠ¶æ€
                    let elapsedSeconds = 0;
                    console.log('ğŸ”„ å¼€å§‹è½®è¯¢æ£€æŸ¥ç™»å½•çŠ¶æ€ï¼ˆæ¯2ç§’ä¸€æ¬¡ï¼‰');
                    yuansuLoginPollInterval = setInterval(async () => {
                        elapsedSeconds += 2;
                        
                        // æ›´æ–°å€’è®¡æ—¶æ˜¾ç¤º
                        const remainingSeconds = 180 - elapsedSeconds;
                        if (remainingSeconds > 0) {
                            qrStatus.innerHTML = `â³ ç­‰å¾…æ‰«ç ...ï¼ˆå‰©ä½™ ${remainingSeconds} ç§’ï¼‰`;
                        }
                        
                        // æ£€æŸ¥ç™»å½•çŠ¶æ€
                        try {
                            const statusRes = await fetch(`${serverUrl}/api/yuansu/status`);
                            const statusData = await statusRes.json();
                            
                            console.log('ğŸ” è½®è¯¢æ£€æŸ¥:', {
                                isLoggedIn: statusData.isLoggedIn,
                                message: statusData.message,
                                elapsed: elapsedSeconds
                            });
                            
                            if (statusData.isLoggedIn) {
                                // ç™»å½•æˆåŠŸ - ä½¿ç”¨æ ‡å¿—é˜²æ­¢é‡å¤å¼¹çª—
                                if (!yuansuLoginSuccessShown) {
                                    console.log('ğŸ‰ æ£€æµ‹åˆ°ç™»å½•æˆåŠŸï¼ï¼ˆé¦–æ¬¡ï¼‰');
                                    yuansuLoginSuccessShown = true; // ç«‹å³è®¾ç½®æ ‡å¿—
                                    yuansuLoginInProgress = false;
                                    
                                    // ç«‹å³æ¸…é™¤å®šæ—¶å™¨ï¼Œé˜²æ­¢é‡å¤è§¦å‘
                                    if (yuansuLoginPollInterval) {
                                        clearInterval(yuansuLoginPollInterval);
                                        yuansuLoginPollInterval = null;
                                    }
                                    
                                    qrSection.style.display = 'none';
                                    btn.disabled = false;
                                    btn.textContent = 'ğŸ“± å¼€å§‹QQæ‰«ç ç™»å½•';
                                    
                                    // æ›´æ–°é…é¢å¡ç‰‡UI
                                    updateQuotaCardUI('yuansu', true);
                                    
                                    // æ˜¾ç¤ºæˆåŠŸæç¤ºï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼‰
                                    alert('âœ… è§…å…ƒç´ ç™»å½•æˆåŠŸï¼\n\nå›¢é˜Ÿæˆå‘˜ç°åœ¨å¯ä»¥ä¸‹è½½è§…å…ƒç´ ç´ æäº†ã€‚');
                                    updateYuansuLoginUI(true);
                                } else {
                                    console.log('âš ï¸  ç™»å½•æˆåŠŸå·²å¤„ç†ï¼Œè·³è¿‡é‡å¤å¼¹çª—');
                                }
                            }
                        } catch (error) {
                            console.error('âŒ æ£€æŸ¥ç™»å½•çŠ¶æ€å¤±è´¥:', error);
                        }
                        
                        // è¶…æ—¶æ£€æŸ¥ï¼ˆ3åˆ†é’Ÿï¼‰
                        if (elapsedSeconds >= 180) {
                            // æ¸…é™¤å®šæ—¶å™¨å’Œæ ‡å¿—
                            if (yuansuLoginPollInterval) {
                                clearInterval(yuansuLoginPollInterval);
                                yuansuLoginPollInterval = null;
                            }
                            yuansuLoginInProgress = false;
                            
                            qrSection.style.display = 'none';
                            btn.disabled = false;
                            btn.textContent = 'ğŸ“± å¼€å§‹QQæ‰«ç ç™»å½•';
                            alert('â° æ‰«ç è¶…æ—¶\n\nè¯·é‡æ–°ç‚¹å‡»æŒ‰é’®å†æ¬¡å°è¯•ã€‚');
                        }
                    }, 2000); // æ¯2ç§’æ£€æŸ¥ä¸€æ¬¡
                    
                } else if (data.success && data.isLoggedIn) {
                    // å·²ç»ç™»å½•
                    alert('âœ… è§…å…ƒç´ ç™»å½•æˆåŠŸï¼\n\n' + data.message);
                    updateYuansuLoginUI(true);
                    btn.disabled = false;
                    btn.textContent = 'ğŸ“± å¼€å§‹QQæ‰«ç ç™»å½•';
                } else {
                    throw new Error(data.message || 'è·å–äºŒç»´ç å¤±è´¥');
                }
                
            } catch (error) {
                // æ¸…é™¤å¯èƒ½å­˜åœ¨çš„å®šæ—¶å™¨å’Œæ ‡å¿—
                if (yuansuLoginPollInterval) {
                    clearInterval(yuansuLoginPollInterval);
                    yuansuLoginPollInterval = null;
                }
                yuansuLoginInProgress = false;
                yuansuLoginSuccessShown = false;
                
                alert('âŒ ç™»å½•å¤±è´¥ï¼š' + error.message + '\n\nè¯·ç¡®è®¤æœåŠ¡å™¨å·²å¯åŠ¨ã€‚');
                btn.disabled = false;
                btn.textContent = 'ğŸ“± å¼€å§‹QQæ‰«ç ç™»å½•';
                qrSection.style.display = 'none';
            }
        }
        
        // è§…å…ƒç´ é€€å‡ºç™»å½•
        async function yuansuLogout() {
            if (!confirm('ç¡®å®šè¦é€€å‡ºè§…å…ƒç´ ç™»å½•å—ï¼Ÿ\n\né€€å‡ºåå›¢é˜Ÿæˆå‘˜å°†æ— æ³•ä¸‹è½½è§…å…ƒç´ ç´ æã€‚')) {
                return;
            }
            
            // æ¸…é™¤å¯èƒ½å­˜åœ¨çš„ç™»å½•è½®è¯¢å®šæ—¶å™¨å’Œæ ‡å¿—
            if (yuansuLoginPollInterval) {
                clearInterval(yuansuLoginPollInterval);
                yuansuLoginPollInterval = null;
            }
            yuansuLoginInProgress = false;
            yuansuLoginSuccessShown = false;
            
            const btn = document.getElementById('yuansuLogoutBtn');
            const originalText = btn.textContent;
            btn.disabled = true;
            btn.textContent = 'ğŸ”„ æ­£åœ¨é€€å‡º...';
            
            try {
                const res = await fetch(`${serverUrl}/api/yuansu/logout`, {
                    method: 'POST'
                });
                
                const data = await res.json();
                
                if (data.success) {
                    alert('âœ… å·²é€€å‡ºè§…å…ƒç´ ç™»å½•\n\n' + data.message);
                    
                    // æ›´æ–°UIä¸ºæœªç™»å½•çŠ¶æ€
                    updateYuansuLoginUI(false);
                    updateQuotaCardUI('yuansu', false);
                } else {
                    throw new Error(data.error || 'é€€å‡ºå¤±è´¥');
                }
                
            } catch (error) {
                alert('âŒ é€€å‡ºå¤±è´¥ï¼š' + error.message);
            } finally {
                btn.disabled = false;
                btn.textContent = originalText;
            }
        }
        
        // æ›´æ–°è§…å…ƒç´ ç™»å½•UIçŠ¶æ€
        function updateYuansuLoginUI(isLoggedIn) {
            const loggedInSection = document.getElementById('yuansuLoggedInSection');
            const loginFormSection = document.getElementById('yuansuLoginFormSection');
            
            console.log('ğŸ¨ æ›´æ–°è§…å…ƒç´ UIçŠ¶æ€:', isLoggedIn ? 'å·²ç™»å½•' : 'æœªç™»å½•');
            
            if (isLoggedIn) {
                loggedInSection.style.display = 'block';
                loginFormSection.style.display = 'none';
            } else {
                loggedInSection.style.display = 'none';
                loginFormSection.style.display = 'block';
            }
        }
        
        // æ£€æŸ¥è§…å…ƒç´ ç™»å½•çŠ¶æ€
        async function checkYuansuStatus() {
            try {
                console.log('ğŸ” æ‰‹åŠ¨æ£€æŸ¥è§…å…ƒç´ ç™»å½•çŠ¶æ€...');
                const res = await fetch(`${serverUrl}/api/yuansu/status`);
                const data = await res.json();
                
                console.log('ğŸ“Š è§…å…ƒç´ çŠ¶æ€æ£€æŸ¥ç»“æœ:', data);
                
                if (data.isLoggedIn) {
                    // ğŸ‰ æ£€æµ‹åˆ°å·²ç™»å½•ï¼Œæ‰§è¡Œå®Œæ•´çš„ç™»å½•æˆåŠŸå¤„ç†
                    console.log('âœ… æ£€æµ‹åˆ°è§…å…ƒç´ å·²ç™»å½•ï¼');
                    
                    // æ¸…é™¤è½®è¯¢å®šæ—¶å™¨ï¼ˆå¦‚æœè¿˜åœ¨è¿è¡Œï¼‰
                    if (yuansuLoginPollInterval) {
                        console.log('ğŸ”„ æ¸…é™¤ç°æœ‰çš„ç™»å½•è½®è¯¢å®šæ—¶å™¨');
                        clearInterval(yuansuLoginPollInterval);
                        yuansuLoginPollInterval = null;
                    }
                    
                    // é‡ç½®ç™»å½•æ ‡å¿—
                    yuansuLoginInProgress = false;
                    yuansuLoginSuccessShown = true; // æ ‡è®°ä¸ºå·²æ˜¾ç¤ºï¼Œé¿å…é‡å¤æç¤º
                    
                    // éšè—äºŒç»´ç åŒºåŸŸ
                    const qrSection = document.getElementById('yuansuQrCodeSection');
                    if (qrSection && qrSection.style.display !== 'none') {
                        qrSection.style.display = 'none';
                        console.log('âœ… å·²éšè—äºŒç»´ç åŒºåŸŸ');
                    }
                    
                    // æ¢å¤ç™»å½•æŒ‰é’®çŠ¶æ€
                    const loginBtn = document.getElementById('yuansuQrLoginBtn');
                    if (loginBtn) {
                        loginBtn.disabled = false;
                        loginBtn.textContent = 'ğŸ“± å¼€å§‹QQæ‰«ç ç™»å½•';
                    }
                    
                    // æ›´æ–°UIä¸ºå·²ç™»å½•çŠ¶æ€
                    updateYuansuLoginUI(true);
                    
                    // æ›´æ–°é…é¢å¡ç‰‡UI
                    updateQuotaCardUI('yuansu', true);
                    
                    // æ˜¾ç¤ºç™»å½•æˆåŠŸæç¤º
                    alert(`âœ… è§…å…ƒç´ å·²ç™»å½•ï¼\n\nç«™ç‚¹ï¼š${data.site?.name || 'è§…å…ƒç´ '}\n${data.message || 'å›¢é˜Ÿæˆå‘˜ç°åœ¨å¯ä»¥ä¸‹è½½è§…å…ƒç´ ç´ æäº†ã€‚'}`);
                } else {
                    // æœªç™»å½•
                    console.log('âŒ è§…å…ƒç´ æœªç™»å½•');
                    updateYuansuLoginUI(false);
                    updateQuotaCardUI('yuansu', false);
                    alert(`âŒ è§…å…ƒç´ æœªç™»å½•\n\n${data.message || 'è¯·å…ˆå®Œæˆç™»å½•'}`);
                }
                
            } catch (error) {
                console.error('âŒ æ£€æŸ¥è§…å…ƒç´ çŠ¶æ€å¤±è´¥:', error);
                alert('âŒ æ£€æŸ¥å¤±è´¥ï¼š' + error.message);
            }
        }
        
        // è½®è¯¢æ£€æŸ¥ç™»å½•çŠ¶æ€
        function startLoginPolling() {
            const pollInterval = setInterval(async () => {
                try {
                    const res = await fetch(`${serverUrl}/api/status`);
                    const data = await res.json();
                    
                    if (data.isLoggedIn) {
                        clearInterval(pollInterval);
                        document.getElementById('loginStatus').style.display = 'block';
                        document.getElementById('loginBtn').disabled = false;
                        document.getElementById('loginBtn').textContent = 'âœ… å·²ç™»å½•';
                        updateQuotaCardUI('huaban', true);
                        alert('ğŸ‰ ç™»å½•æˆåŠŸï¼\n\nå›¢é˜Ÿæˆå‘˜ç°åœ¨å¯ä»¥ä½¿ç”¨ä¸‹è½½åŠŸèƒ½äº†ã€‚');
                    }
                } catch (error) {
                    // ç»§ç»­è½®è¯¢
                }
            }, 3000);  // æ¯3ç§’æ£€æŸ¥ä¸€æ¬¡
            
            // 5åˆ†é’Ÿååœæ­¢è½®è¯¢
            setTimeout(() => {
                clearInterval(pollInterval);
                document.getElementById('loginBtn').disabled = false;
                document.getElementById('loginBtn').textContent = 'ğŸš€ å¼€å§‹ç™»å½•';
            }, 300000);
        }
        
        // æ›´æ–°çŠ¶æ€
        function updateStatus(connected, text) {
            const dot = document.getElementById('statusDot');
            const status = document.getElementById('statusText');
            
            if (connected) {
                dot.classList.add('connected');
                status.textContent = text;
            } else {
                dot.classList.remove('connected');
                status.textContent = text;
            }
            
            // æ›´æ–°æœåŠ¡å™¨åœ°å€æ˜¾ç¤º
            updateServerUrlDisplay();
        }
        
        // æ£€æµ‹URLç±»å‹
        function detectUrlType() {
            const url = document.getElementById('urlInput').value.trim();
            const detectedSite = document.getElementById('detectedSite');
            
            if (!url) {
                detectedSite.style.display = 'none';
                return;
            }
            
            let siteInfo = '';
            let color = '';
            
            if (url.includes('51yuansu.com')) {
                siteInfo = 'âœ“ è¯†åˆ«ä¸ºè§…å…ƒç´ ';
                color = '#8b5cf6';
            } else if (url.includes('90sheji.com')) {
                siteInfo = 'âœ“ è¯†åˆ«ä¸º90è®¾è®¡';
                color = '#f97316';
            } else if (url.includes('design006.com')) {
                siteInfo = 'âœ“ è¯†åˆ«ä¸ºäº«è®¾è®¡';
                color = '#eab308';
            } else if (url.includes('huaban.com/pins/')) {
                siteInfo = 'âœ“ è¯†åˆ«ä¸ºèŠ±ç“£ç½‘ Pin';
                color = '#ee584a';
            } else if (url.includes('huaban.com/boards/')) {
                siteInfo = 'âœ“ è¯†åˆ«ä¸ºèŠ±ç“£ç½‘ç”»æ¿';
                color = '#ee584a';
            } else if (url.includes('huaban.com')) {
                siteInfo = '? èŠ±ç“£ç½‘é“¾æ¥æ ¼å¼ä¸æ­£ç¡®';
                color = '#f59e0b';
            } else {
                siteInfo = 'âš  ä¸æ”¯æŒçš„ç½‘ç«™';
                color = '#ef4444';
            }
            
            detectedSite.textContent = siteInfo;
            detectedSite.style.color = color;
            detectedSite.style.display = 'inline';
        }
        
        // è§£æURL
        async function parseUrl() {
            const url = document.getElementById('urlInput').value.trim();
            
            if (!url) {
                alert('è¯·è¾“å…¥ç½‘å€');
                return;
            }
            
            // éªŒè¯URLæ ¼å¼
            if (!url.includes('huaban.com') && !url.includes('51yuansu.com') && !url.includes('90sheji.com') && !url.includes('design006.com')) {
                alert('âŒ ä¸æ”¯æŒçš„ç½‘ç«™\n\nä»…æ”¯æŒï¼š\nâ€¢ èŠ±ç“£ç½‘ï¼ˆhuaban.comï¼‰\nâ€¢ è§…å…ƒç´ ï¼ˆ51yuansu.comï¼‰\nâ€¢ 90è®¾è®¡ï¼ˆ90sheji.comï¼‰\nâ€¢ äº«è®¾è®¡ï¼ˆdesign006.comï¼‰');
                return;
            }
            
            showLoading(true);
            hideResult();
            
            try {
                // åˆ›å»ºä¸€ä¸ªå¸¦è¶…æ—¶çš„fetchè¯·æ±‚ï¼ˆ45ç§’è¶…æ—¶ï¼ŒåŒ¹é…æœåŠ¡å™¨å»¶é•¿çš„ç­‰å¾…æ—¶é—´ï¼‰
                const controller = new AbortController();
                const timeout = setTimeout(() => controller.abort(), 45000);
                
                const res = await fetch(`${serverUrl}/api/parse`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ url }),
                    signal: controller.signal
                });
                
                clearTimeout(timeout);
                
                // æ£€æŸ¥HTTPçŠ¶æ€ç 
                if (res.status === 429) {
                    // é…é¢å·²ç”¨å®Œ
                    const data = await res.json();
                    alert('âŒ ' + (data.message || 'ä»Šæ—¥ä¸‹è½½æ¬¡æ•°å·²ç”¨å®Œï¼Œè¯·æ˜å¤©å†è¯•'));
                    await updateDownloadQuota(); // æ›´æ–°æ˜¾ç¤º
                    showLoading(false);
                    return;
                }
                
                const data = await res.json();
                
                if (data.error) {
                    throw new Error(data.error);
                }
                
                // æ›´æ–°ä¸‹è½½é…é¢æ˜¾ç¤º
                if (data.downloadInfo) {
                    console.log('ğŸ“Š ä¸‹è½½é…é¢ä¿¡æ¯:', data.downloadInfo);
                    
                    // æ˜¾ç¤ºé…é¢æç¤º
                    if (data.downloadInfo.message) {
                        console.log('ğŸ’¡ é…é¢æç¤º:', data.downloadInfo.message);
                    }
                    
                    await updateDownloadQuota();
                }
                
                showResult(data.images || data.files || []);
                
            } catch (error) {
                if (error.name === 'AbortError') {
                    alert('è§£æè¶…æ—¶ï¼Œè¯·é‡è¯•');
                } else {
                    alert('è§£æå¤±è´¥ï¼š' + error.message);
                }
            } finally {
                showLoading(false);
            }
        }
        
        // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
        function showLoading(show) {
            const loading = document.getElementById('loading');
            if (show) {
                loading.classList.add('show');
            } else {
                loading.classList.remove('show');
            }
        }
        
        // æ˜¾ç¤ºç»“æœ
        function showResult(items) {
            const result = document.getElementById('result');
            const list = document.getElementById('downloadList');
            
            list.innerHTML = '';
            
            if (items.length === 0) {
                list.innerHTML = '<li style="padding: 10px; text-align: center; color: #999;">æœªæ‰¾åˆ°å†…å®¹</li>';
            } else {
                items.forEach((item, index) => {
                    const li = document.createElement('li');
                    li.className = 'download-item';
                    
                    // æ„å»ºæ ‡é¢˜ï¼Œæ˜¾ç¤ºæ ¼å¼å’Œå¤§å°
                    let title = item.title || `æ–‡ä»¶ ${index + 1}`;
                    
                    // æ·»åŠ æ ¼å¼æ ‡ç­¾
                    let formatBadge = '';
                    if (item.format) {
                        const formatColors = {
                            'PNG': '#4CAF50',
                            'JPG': '#2196F3',
                            'JPEG': '#2196F3',
                            'GIF': '#FF9800',
                            'PSD': '#9C27B0',
                            'EPS': '#E91E63',
                            'AI': '#FF5722',
                            'SVG': '#00BCD4',
                            'PDF': '#F44336',
                            'ZIP': '#607D8B',
                            'RAR': '#795548',
                            'CDR': '#00A651',
                            '3D': '#3F51B5',
                            'SOURCE': '#607D8B'
                        };
                        const color = formatColors[item.format] || '#999';
                        formatBadge = `<span style="background: ${color}; color: white; padding: 2px 8px; border-radius: 3px; font-size: 11px; margin-left: 8px;">${item.format}</span>`;
                    }
                    
                    // æ·»åŠ ç½‘ç«™æ ‡è¯†
                    let siteBadge = '';
                    if (item.site) {
                    const siteColors = {
                        'èŠ±ç“£ç½‘': '#ee584a',
                        'è§…å…ƒç´ ': '#8b5cf6',
                        '90è®¾è®¡': '#f97316',
                        'äº«è®¾è®¡': '#eab308'
                    };
                        const color = siteColors[item.site] || '#666';
                        siteBadge = `<span style="background: ${color}; color: white; padding: 2px 6px; border-radius: 3px; font-size: 10px; margin-left: 8px;">${item.site}</span>`;
                    }
                    
                    // æ·»åŠ å¤§å°ä¿¡æ¯
                    let sizeInfo = '';
                    if (item.size) {
                        sizeInfo = `<span style="color: #666; font-size: 12px; margin-left: 8px;">${item.size}</span>`;
                    }
                    
                    // æ·»åŠ å°ºå¯¸ä¿¡æ¯
                    let dimensionInfo = '';
                    if (item.width && item.height) {
                        dimensionInfo = `<span style="color: #666; font-size: 12px; margin-left: 8px;">${item.width}Ã—${item.height}</span>`;
                    }
                    
                    // ä½¿ç”¨ item.title ä½œä¸ºä¸‹è½½æ–‡ä»¶åï¼ˆç¡®ä¿ç»Ÿä¸€ï¼‰
                    const downloadFileName = item.title || `æ–‡ä»¶${index + 1}.${item.format ? item.format.toLowerCase() : 'file'}`;
                    
                    // å®‰å…¨è·å–URLï¼ˆå…¼å®¹ url å’Œ downloadUrl å­—æ®µï¼‰
                    const itemUrl = item.url || item.downloadUrl || '';
                    
                    // æ„å»ºä¸‹è½½URL
                    const finalDownloadUrl = item.realUrl ? itemUrl : `${serverUrl}/api/download?url=${encodeURIComponent(itemUrl)}&filename=${encodeURIComponent(downloadFileName)}`;
                    
                    // å®‰å…¨çš„å­—ç¬¦ä¸²è½¬ä¹‰å‡½æ•°
                    const escapeHtml = (str) => (str || '').replace(/"/g, '&quot;');
                    const escapeJs = (str) => (str || '').replace(/'/g, "\\'");
                    
                    li.innerHTML = `
                        <div style="flex: 1;">
                            <div style="margin-bottom: 5px;">
                                <span>${index + 1}. ${title}</span>
                                ${siteBadge}
                                ${formatBadge}
                                ${sizeInfo}
                                ${dimensionInfo}
                                ${item.realUrl ? '<span style="background: #28a745; color: white; padding: 2px 6px; border-radius: 3px; font-size: 10px; margin-left: 8px;">ç›´é“¾</span>' : ''}
                            </div>
                            <div style="font-size: 11px; color: #666; word-break: break-all;">
                                <a href="${finalDownloadUrl}" target="_blank" style="color: #667eea; text-decoration: none;" 
                                   onmouseover="this.style.textDecoration='underline'" 
                                   onmouseout="this.style.textDecoration='none'"
                                   title="ç‚¹å‡»ç›´æ¥ä¸‹è½½">
                                    ğŸ”— ${finalDownloadUrl.substring(0, 80)}${finalDownloadUrl.length > 80 ? '...' : ''}
                                </a>
                                <button 
                                    onclick="navigator.clipboard.writeText('${escapeJs(finalDownloadUrl)}').then(() => alert('âœ… é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼'))"
                                    style="background: transparent; border: none; color: #667eea; cursor: pointer; margin-left: 8px; font-size: 11px;"
                                    title="å¤åˆ¶é“¾æ¥"
                                >
                                    ğŸ“‹ å¤åˆ¶
                                </button>
                            </div>
                        </div>
                        <button 
                            class="download-btn" 
                            data-url="${escapeHtml(itemUrl)}" 
                            data-filename="${escapeHtml(downloadFileName)}"
                            data-realurl="${item.realUrl || false}"
                            style="background: #667eea; color: white; padding: 6px 16px; border-radius: 4px; border: none; cursor: pointer; font-size: 13px; flex-shrink: 0;"
                            onmouseover="this.style.background='#5568d3'" 
                            onmouseout="this.style.background='#667eea'"
                        >
                            ğŸ“¥ ä¸‹è½½
                        </button>
                    `;
                    
                    // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                    const downloadBtn = li.querySelector('.download-btn');
                    downloadBtn.addEventListener('click', function() {
                        const isRealUrl = this.getAttribute('data-realurl') === 'true';
                        downloadFile(this.getAttribute('data-url'), this.getAttribute('data-filename'), isRealUrl);
                    });
                    
                    list.appendChild(li);
                });
            }
            
            result.classList.add('show');
        }
        
        // éšè—ç»“æœ
        function hideResult() {
            document.getElementById('result').classList.remove('show');
        }
        
        // ä¸‹è½½æ–‡ä»¶
        async function downloadFile(fileUrl, filename, isRealUrl) {
            try {
                console.log('ğŸ“¥ å¼€å§‹ä¸‹è½½');
                console.log('  æ–‡ä»¶å:', filename);
                console.log('  åŸå§‹URL:', fileUrl);
                console.log('  æ˜¯å¦çœŸå®URL:', isRealUrl);
                
                let downloadUrl;
                
                if (isRealUrl) {
                    // ğŸ‰ ç›´æ¥ä½¿ç”¨èŠ±ç“£ç½‘è¿”å›çš„çœŸå®ä¸‹è½½URL
                    downloadUrl = fileUrl;
                    console.log('âœ… ä½¿ç”¨çœŸå®ä¸‹è½½URLï¼ˆä¸èµ°ä»£ç†ï¼‰');
                } else {
                    // ä½¿ç”¨æœåŠ¡å™¨ä»£ç†
                    downloadUrl = `${serverUrl}/api/download?url=${encodeURIComponent(fileUrl)}&filename=${encodeURIComponent(filename)}`;
                    console.log('âš¡ ä½¿ç”¨æœåŠ¡å™¨ä»£ç†ä¸‹è½½');
                }
                
                console.log('ğŸ”— æœ€ç»ˆä¸‹è½½é“¾æ¥:', downloadUrl);
                
                // ğŸ¯ ä½¿ç”¨uTools APIæˆ–ç³»ç»Ÿé»˜è®¤æµè§ˆå™¨æ‰“å¼€ä¸‹è½½é“¾æ¥
                if (typeof utools !== 'undefined' && utools.shellOpenExternal) {
                    // å¦‚æœåœ¨uToolsç¯å¢ƒä¸­ï¼Œä½¿ç”¨uTools APIæ‰“å¼€å¤–éƒ¨é“¾æ¥
                    console.log('âœ… ä½¿ç”¨uToolsæ‰“å¼€å¤–éƒ¨é“¾æ¥');
                    utools.shellOpenExternal(downloadUrl);
                } else if (typeof require !== 'undefined') {
                    // å¦‚æœæ˜¯Electronç¯å¢ƒï¼Œä½¿ç”¨shell
                    try {
                        const { shell } = require('electron');
                        console.log('âœ… ä½¿ç”¨Electron shellæ‰“å¼€é“¾æ¥');
                        shell.openExternal(downloadUrl);
                    } catch (e) {
                        // é™çº§åˆ°window.open
                        console.log('âš¡ é™çº§ä½¿ç”¨window.open');
                        window.open(downloadUrl, '_blank');
                    }
                } else {
                    // æ™®é€šæµè§ˆå™¨ç¯å¢ƒï¼Œç›´æ¥æ‰“å¼€
                    console.log('âœ… ä½¿ç”¨window.openæ‰“å¼€é“¾æ¥');
                    window.open(downloadUrl, '_blank');
                }
                
                console.log('âœ… ä¸‹è½½å·²è§¦å‘ï¼ˆåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼‰');
                
            } catch (error) {
                console.error('âŒ ä¸‹è½½å¤±è´¥:', error);
                alert('ä¸‹è½½å¤±è´¥ï¼š' + error.message);
            }
        }
        
        // ==================== 90è®¾è®¡ç›¸å…³å‡½æ•° ====================
        
        // 90è®¾è®¡ç™»å½•ç›¸å…³å˜é‡
        let ninetyShejieLoginPollInterval = null;
        let ninetyShejieLoginInProgress = false;
        let ninetyShejieLoginSuccessShown = false;
        
        // æ›´æ–°90è®¾è®¡ç™»å½•UI
        function updateNinetyShejieLoginUI(isLoggedIn) {
            const loggedInSection = document.getElementById('ninetyShejieLoggedInSection');
            const loginFormSection = document.getElementById('ninetyShejieLoginFormSection');
            
            console.log('ğŸ¯ æ›´æ–°90è®¾è®¡UIçŠ¶æ€:', isLoggedIn ? 'å·²ç™»å½•' : 'æœªç™»å½•');
            
            if (isLoggedIn) {
                loggedInSection.style.display = 'block';
                loginFormSection.style.display = 'none';
            } else {
                loggedInSection.style.display = 'none';
                loginFormSection.style.display = 'block';
            }
        }
        
        // 90è®¾è®¡QQæ‰«ç ç™»å½•
        async function ninetyShejieQrLogin() {
            const btn = document.getElementById('ninetyShejieQrLoginBtn');
            const qrSection = document.getElementById('ninetyShejieQrCodeSection');
            const qrImg = document.getElementById('ninetyShejieQrCodeImg');
            const qrStatus = document.getElementById('ninetyShejieQrCodeStatus');
            
            // æ¸…é™¤å¯èƒ½å­˜åœ¨çš„æ—§å®šæ—¶å™¨
            if (ninetyShejieLoginPollInterval) {
                console.log('âš ï¸  æ¸…é™¤æ—§çš„è½®è¯¢å®šæ—¶å™¨');
                clearInterval(ninetyShejieLoginPollInterval);
                ninetyShejieLoginPollInterval = null;
            }
            
            // é‡ç½®æ ‡å¿—
            ninetyShejieLoginInProgress = true;
            ninetyShejieLoginSuccessShown = false;
            
            btn.disabled = true;
            btn.textContent = 'ğŸ”„ æ­£åœ¨ç”ŸæˆäºŒç»´ç ...';
            
            try {
                console.log('ğŸ”„ å¼€å§‹è°ƒç”¨90è®¾è®¡ç™»å½•API...');
                console.log('ğŸ“¡ è¯·æ±‚URL:', `${serverUrl}/api/90sheji/login`);
                
                // è°ƒç”¨APIè·å–äºŒç»´ç 
                const res = await fetch(`${serverUrl}/api/90sheji/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({})
                });
                
                console.log('ğŸ“¥ æ”¶åˆ°æœåŠ¡å™¨å“åº”ï¼ŒçŠ¶æ€ç :', res.status);
                
                const data = await res.json();
                console.log('ğŸ“¦ æœåŠ¡å™¨è¿”å›æ•°æ®:', data);
                
                if (data.success && data.waiting && data.qrcode) {
                    console.log('âœ… æ•°æ®éªŒè¯é€šè¿‡ï¼Œå¼€å§‹æ˜¾ç¤ºäºŒç»´ç ');
                    console.log('ğŸ“Š äºŒç»´ç æ•°æ®é•¿åº¦:', data.qrcode.length);
                    
                    // æ˜¾ç¤ºäºŒç»´ç 
                    qrImg.src = data.qrcode;
                    qrSection.style.display = 'block';
                    qrStatus.innerHTML = 'â³ ç­‰å¾…æ‰«ç ...ï¼ˆæœ€å¤š3åˆ†é’Ÿï¼‰';
                    btn.textContent = 'â³ æ‰«ç ä¸­...';
                    
                    console.log('âœ… 90è®¾è®¡äºŒç»´ç å·²æ˜¾ç¤º');
                    
                    // ğŸ¯ ç­‰å¾…3ç§’åå†å¼€å§‹è½®è¯¢ï¼Œé¿å…ç«‹å³æ£€æµ‹åˆ°æ—§çš„ç™»å½•çŠ¶æ€
                    console.log('â³ ç­‰å¾…3ç§’åå¼€å§‹è½®è¯¢æ£€æŸ¥ç™»å½•çŠ¶æ€...');
                    await new Promise(resolve => setTimeout(resolve, 3000));
                    
                    // å¼€å§‹è½®è¯¢æ£€æŸ¥ç™»å½•çŠ¶æ€
                    let elapsedSeconds = 0;
                    console.log('ğŸ”„ å¼€å§‹è½®è¯¢æ£€æŸ¥ç™»å½•çŠ¶æ€ï¼ˆæ¯2ç§’ä¸€æ¬¡ï¼‰');
                    ninetyShejieLoginPollInterval = setInterval(async () => {
                        elapsedSeconds += 2;
                        
                        // æ›´æ–°å€’è®¡æ—¶æ˜¾ç¤º
                        const remainingSeconds = 180 - elapsedSeconds;
                        if (remainingSeconds > 0) {
                            qrStatus.innerHTML = `â³ ç­‰å¾…æ‰«ç ...ï¼ˆå‰©ä½™ ${remainingSeconds} ç§’ï¼‰`;
                        }
                        
                        // æ£€æŸ¥ç™»å½•çŠ¶æ€
                        try {
                            console.log(`ğŸ” [${elapsedSeconds}s] å¼€å§‹æ£€æŸ¥90è®¾è®¡ç™»å½•çŠ¶æ€...`);
                            const statusRes = await fetch(`${serverUrl}/api/90sheji/status`);
                            
                            if (!statusRes.ok) {
                                console.error('âŒ çŠ¶æ€æ£€æŸ¥è¯·æ±‚å¤±è´¥ï¼ŒHTTPçŠ¶æ€:', statusRes.status);
                                return;
                            }
                            
                            const statusData = await statusRes.json();
                            
                            console.log(`ğŸ“Š [${elapsedSeconds}s] 90è®¾è®¡çŠ¶æ€å“åº”:`, {
                                isLoggedIn: statusData.isLoggedIn,
                                message: statusData.message,
                                site: statusData.site,
                                fullData: statusData
                            });
                            
                            if (statusData.isLoggedIn) {
                                // ç™»å½•æˆåŠŸ
                                console.log('âœ… æ£€æµ‹åˆ° isLoggedIn = true');
                                
                                if (!ninetyShejieLoginSuccessShown) {
                                    console.log('ğŸ‰ 90è®¾è®¡ç™»å½•æˆåŠŸï¼å¼€å§‹æ‰§è¡Œç™»å½•æˆåŠŸå¤„ç†...');
                                    ninetyShejieLoginSuccessShown = true;
                                    ninetyShejieLoginInProgress = false;
                                    
                                    // æ¸…é™¤å®šæ—¶å™¨
                                    if (ninetyShejieLoginPollInterval) {
                                        console.log('ğŸ”„ æ¸…é™¤è½®è¯¢å®šæ—¶å™¨');
                                        clearInterval(ninetyShejieLoginPollInterval);
                                        ninetyShejieLoginPollInterval = null;
                                    }
                                    
                                    // éšè—äºŒç»´ç 
                                    qrSection.style.display = 'none';
                                    console.log('âœ… å·²éšè—äºŒç»´ç åŒºåŸŸ');
                                    
                                    // æ¢å¤æŒ‰é’®
                                    btn.disabled = false;
                                    btn.textContent = 'ğŸ“± å¼€å§‹QQæ‰«ç ç™»å½•';
                                    console.log('âœ… å·²æ¢å¤ç™»å½•æŒ‰é’®çŠ¶æ€');
                                    
                                    // æ›´æ–°UI
                                    updateNinetyShejieLoginUI(true);
                                    console.log('âœ… å·²æ›´æ–°UIä¸ºå·²ç™»å½•çŠ¶æ€');
                                    
                                    // æ›´æ–°é…é¢å¡ç‰‡UI
                                    updateQuotaCardUI('ninetyshejie', true);
                                    
                                    // æ˜¾ç¤ºæç¤º
                                    alert('âœ… 90è®¾è®¡ç™»å½•æˆåŠŸï¼\n\nå›¢é˜Ÿæˆå‘˜ç°åœ¨å¯ä»¥ä¸‹è½½90è®¾è®¡ç´ æäº†ã€‚');
                                    console.log('âœ… ç™»å½•æˆåŠŸå¤„ç†å®Œæˆ');
                                } else {
                                    console.log('âš ï¸  ç™»å½•æˆåŠŸæç¤ºå·²æ˜¾ç¤ºè¿‡ï¼Œè·³è¿‡é‡å¤å¤„ç†');
                                }
                            } else {
                                console.log(`â³ [${elapsedSeconds}s] å°šæœªç™»å½•ï¼Œç»§ç»­ç­‰å¾…...`);
                            }
                        } catch (error) {
                            console.error('âŒ æ£€æŸ¥90è®¾è®¡ç™»å½•çŠ¶æ€å¤±è´¥:', error);
                            console.error('ğŸ“Š é”™è¯¯è¯¦æƒ…:', {
                                message: error.message,
                                stack: error.stack
                            });
                        }
                        
                        // è¶…æ—¶æ£€æŸ¥ï¼ˆ3åˆ†é’Ÿï¼‰
                        if (elapsedSeconds >= 180) {
                            if (ninetyShejieLoginPollInterval) {
                                clearInterval(ninetyShejieLoginPollInterval);
                                ninetyShejieLoginPollInterval = null;
                            }
                            ninetyShejieLoginInProgress = false;
                            
                            qrSection.style.display = 'none';
                            btn.disabled = false;
                            btn.textContent = 'ğŸ“± å¼€å§‹QQæ‰«ç ç™»å½•';
                            alert('â±ï¸ ç™»å½•è¶…æ—¶\n\nè¯·é‡æ–°ç‚¹å‡»ç™»å½•æŒ‰é’®è·å–æ–°äºŒç»´ç ');
                        }
                    }, 2000);
                    
                } else if (data.error) {
                    console.error('âŒ æœåŠ¡å™¨è¿”å›é”™è¯¯:', data.error);
                    throw new Error(data.error);
                } else {
                    console.error('âŒ æœåŠ¡å™¨è¿”å›æ•°æ®æ ¼å¼ä¸æ­£ç¡®:', {
                        hasSuccess: !!data.success,
                        hasWaiting: !!data.waiting,
                        hasQrcode: !!data.qrcode,
                        data: data
                    });
                    throw new Error('è·å–äºŒç»´ç å¤±è´¥ï¼šæœåŠ¡å™¨è¿”å›æ•°æ®ä¸å®Œæ•´');
                }
                
            } catch (error) {
                console.error('âŒ 90è®¾è®¡ç™»å½•å¤±è´¥:', error);
                console.error('ğŸ“Š é”™è¯¯è¯¦æƒ…:', {
                    message: error.message,
                    stack: error.stack
                });
                
                alert('âŒ ç™»å½•å¤±è´¥ï¼š' + error.message + '\n\nè¯·æŸ¥çœ‹æ§åˆ¶å°(F12)è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯');
                qrSection.style.display = 'none';
                btn.disabled = false;
                btn.textContent = 'ğŸ“± å¼€å§‹QQæ‰«ç ç™»å½•';
                ninetyShejieLoginInProgress = false;
            }
        }
        
        // 90è®¾è®¡é€€å‡ºç™»å½•
        async function ninetyShejieLogout() {
            if (!confirm('ç¡®å®šè¦é€€å‡º90è®¾è®¡ç™»å½•å—ï¼Ÿ\n\né€€å‡ºåå›¢é˜Ÿæˆå‘˜å°†æ— æ³•ä¸‹è½½90è®¾è®¡ç´ æã€‚')) {
                return;
            }
            
            // æ¸…é™¤å¯èƒ½å­˜åœ¨çš„ç™»å½•è½®è¯¢å®šæ—¶å™¨å’Œæ ‡å¿—
            if (ninetyShejieLoginPollInterval) {
                clearInterval(ninetyShejieLoginPollInterval);
                ninetyShejieLoginPollInterval = null;
            }
            ninetyShejieLoginInProgress = false;
            ninetyShejieLoginSuccessShown = false;
            
            const btn = document.getElementById('ninetyShejieLogoutBtn');
            const originalText = btn.textContent;
            btn.disabled = true;
            btn.textContent = 'ğŸ”„ æ­£åœ¨é€€å‡º...';
            
            try {
                const res = await fetch(`${serverUrl}/api/90sheji/logout`, {
                    method: 'POST'
                });
                
                const data = await res.json();
                
                if (data.success) {
                    alert('âœ… å·²é€€å‡º90è®¾è®¡ç™»å½•\n\n' + data.message);
                    updateNinetyShejieLoginUI(false);
                    updateQuotaCardUI('ninetyshejie', false);
                } else {
                    throw new Error(data.error || 'é€€å‡ºå¤±è´¥');
                }
                
            } catch (error) {
                alert('âŒ é€€å‡ºå¤±è´¥ï¼š' + error.message);
            } finally {
                btn.disabled = false;
                btn.textContent = originalText;
            }
        }
        
        // æ£€æŸ¥90è®¾è®¡ç™»å½•çŠ¶æ€
        async function checkNinetyShejieStatus() {
            try {
                console.log('ğŸ” æ‰‹åŠ¨æ£€æŸ¥90è®¾è®¡ç™»å½•çŠ¶æ€...');
                const res = await fetch(`${serverUrl}/api/90sheji/status`);
                const data = await res.json();
                
                console.log('ğŸ“Š 90è®¾è®¡çŠ¶æ€æ£€æŸ¥ç»“æœ:', data);
                
                if (data.isLoggedIn) {
                    // ğŸ‰ æ£€æµ‹åˆ°å·²ç™»å½•ï¼Œæ‰§è¡Œå®Œæ•´çš„ç™»å½•æˆåŠŸå¤„ç†
                    console.log('âœ… æ£€æµ‹åˆ°90è®¾è®¡å·²ç™»å½•ï¼');
                    
                    // æ¸…é™¤è½®è¯¢å®šæ—¶å™¨ï¼ˆå¦‚æœè¿˜åœ¨è¿è¡Œï¼‰
                    if (ninetyShejieLoginPollInterval) {
                        console.log('ğŸ”„ æ¸…é™¤ç°æœ‰çš„ç™»å½•è½®è¯¢å®šæ—¶å™¨');
                        clearInterval(ninetyShejieLoginPollInterval);
                        ninetyShejieLoginPollInterval = null;
                    }
                    
                    // é‡ç½®ç™»å½•æ ‡å¿—
                    ninetyShejieLoginInProgress = false;
                    ninetyShejieLoginSuccessShown = true; // æ ‡è®°ä¸ºå·²æ˜¾ç¤ºï¼Œé¿å…é‡å¤æç¤º
                    
                    // éšè—äºŒç»´ç åŒºåŸŸ
                    const qrSection = document.getElementById('ninetyShejieQrCodeSection');
                    if (qrSection && qrSection.style.display !== 'none') {
                        qrSection.style.display = 'none';
                        console.log('âœ… å·²éšè—äºŒç»´ç åŒºåŸŸ');
                    }
                    
                    // æ¢å¤ç™»å½•æŒ‰é’®çŠ¶æ€
                    const loginBtn = document.getElementById('ninetyShejieQrLoginBtn');
                    if (loginBtn) {
                        loginBtn.disabled = false;
                        loginBtn.textContent = 'ğŸ“± å¼€å§‹QQæ‰«ç ç™»å½•';
                    }
                    
                    // æ›´æ–°UIä¸ºå·²ç™»å½•çŠ¶æ€
                    updateNinetyShejieLoginUI(true);
                    
                    // æ›´æ–°é…é¢å¡ç‰‡UI
                    updateQuotaCardUI('ninetyshejie', true);
                    
                    // æ˜¾ç¤ºç™»å½•æˆåŠŸæç¤º
                    alert('âœ… 90è®¾è®¡å·²ç™»å½•ï¼\n\n' + (data.message || 'å›¢é˜Ÿæˆå‘˜ç°åœ¨å¯ä»¥ä¸‹è½½90è®¾è®¡ç´ æäº†ã€‚'));
                } else {
                    // æœªç™»å½•
                    console.log('âŒ 90è®¾è®¡æœªç™»å½•');
                    updateNinetyShejieLoginUI(false);
                    updateQuotaCardUI('ninetyshejie', false);
                    alert('âŒ 90è®¾è®¡æœªç™»å½•\n\n' + (data.message || 'è¯·å…ˆå®Œæˆç™»å½•'));
                }
            } catch (error) {
                console.error('âŒ æ£€æŸ¥90è®¾è®¡çŠ¶æ€å¤±è´¥:', error);
                alert('âŒ æ£€æŸ¥çŠ¶æ€å¤±è´¥ï¼š' + error.message);
            }
        }
        
        // ==================== äº«è®¾è®¡ç›¸å…³å‡½æ•° ====================
        
        // äº«è®¾è®¡ç™»å½•ç›¸å…³å˜é‡
        let design006LoginPollInterval = null;
        let design006LoginInProgress = false;
        let design006LoginSuccessShown = false;
        
        // æ›´æ–°äº«è®¾è®¡ç™»å½•UI
        function updateDesign006LoginUI(isLoggedIn) {
            const loggedInSection = document.getElementById('design006LoggedInSection');
            const loginFormSection = document.getElementById('design006LoginFormSection');
            
            console.log('âœ¨ æ›´æ–°äº«è®¾è®¡UIçŠ¶æ€:', isLoggedIn ? 'å·²ç™»å½•' : 'æœªç™»å½•');
            
            if (isLoggedIn) {
                loggedInSection.style.display = 'block';
                loginFormSection.style.display = 'none';
            } else {
                loggedInSection.style.display = 'none';
                loginFormSection.style.display = 'block';
            }
        }
        
        // äº«è®¾è®¡QQæ‰«ç ç™»å½•
        async function design006QrLogin() {
            const btn = document.getElementById('design006QrLoginBtn');
            const qrSection = document.getElementById('design006QrCodeSection');
            const qrImg = document.getElementById('design006QrCodeImg');
            const qrStatus = document.getElementById('design006QrCodeStatus');
            
            // æ¸…é™¤å¯èƒ½å­˜åœ¨çš„æ—§å®šæ—¶å™¨
            if (design006LoginPollInterval) {
                console.log('âš ï¸  æ¸…é™¤æ—§çš„è½®è¯¢å®šæ—¶å™¨');
                clearInterval(design006LoginPollInterval);
                design006LoginPollInterval = null;
            }
            
            // é‡ç½®æ ‡å¿—
            design006LoginInProgress = true;
            design006LoginSuccessShown = false;
            
            btn.disabled = true;
            btn.textContent = 'ğŸ”„ æ­£åœ¨ç”ŸæˆäºŒç»´ç ...';
            
            try {
                console.log('ğŸ”„ å¼€å§‹è°ƒç”¨äº«è®¾è®¡ç™»å½•API...');
                console.log('ğŸ“¡ è¯·æ±‚URL:', `${serverUrl}/api/design006/login`);
                
                // è°ƒç”¨APIè·å–äºŒç»´ç 
                const res = await fetch(`${serverUrl}/api/design006/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({})
                });
                
                console.log('ğŸ“¥ æ”¶åˆ°æœåŠ¡å™¨å“åº”ï¼ŒçŠ¶æ€ç :', res.status);
                
                const data = await res.json();
                console.log('ğŸ“¦ æœåŠ¡å™¨è¿”å›æ•°æ®:', data);
                
                if (data.success && data.waiting && data.qrcode) {
                    console.log('âœ… æ•°æ®éªŒè¯é€šè¿‡ï¼Œå¼€å§‹æ˜¾ç¤ºäºŒç»´ç ');
                    console.log('ğŸ“Š äºŒç»´ç æ•°æ®é•¿åº¦:', data.qrcode.length);
                    
                    // æ˜¾ç¤ºäºŒç»´ç 
                    qrImg.src = data.qrcode;
                    qrSection.style.display = 'block';
                    qrStatus.innerHTML = 'â³ ç­‰å¾…æ‰«ç ...ï¼ˆæœ€å¤š3åˆ†é’Ÿï¼‰';
                    btn.textContent = 'â³ æ‰«ç ä¸­...';
                    
                    console.log('âœ… äº«è®¾è®¡äºŒç»´ç å·²æ˜¾ç¤º');
                    
                    // ç­‰å¾…3ç§’åå†å¼€å§‹è½®è¯¢
                    console.log('â³ ç­‰å¾…3ç§’åå¼€å§‹è½®è¯¢æ£€æŸ¥ç™»å½•çŠ¶æ€...');
                    await new Promise(resolve => setTimeout(resolve, 3000));
                    
                    // å¼€å§‹è½®è¯¢æ£€æŸ¥ç™»å½•çŠ¶æ€
                    let elapsedSeconds = 0;
                    console.log('ğŸ”„ å¼€å§‹è½®è¯¢æ£€æŸ¥ç™»å½•çŠ¶æ€ï¼ˆæ¯2ç§’ä¸€æ¬¡ï¼‰');
                    design006LoginPollInterval = setInterval(async () => {
                        elapsedSeconds += 2;
                        
                        // æ›´æ–°å€’è®¡æ—¶æ˜¾ç¤º
                        const remainingSeconds = 180 - elapsedSeconds;
                        if (remainingSeconds > 0) {
                            qrStatus.innerHTML = `â³ ç­‰å¾…æ‰«ç ...ï¼ˆå‰©ä½™ ${remainingSeconds} ç§’ï¼‰`;
                        }
                        
                        // æ£€æŸ¥ç™»å½•çŠ¶æ€
                        try {
                            console.log(`ğŸ” [${elapsedSeconds}s] å¼€å§‹æ£€æŸ¥äº«è®¾è®¡ç™»å½•çŠ¶æ€...`);
                            const statusRes = await fetch(`${serverUrl}/api/design006/status`);
                            
                            if (!statusRes.ok) {
                                console.error('âŒ çŠ¶æ€æ£€æŸ¥è¯·æ±‚å¤±è´¥ï¼ŒHTTPçŠ¶æ€:', statusRes.status);
                                return;
                            }
                            
                            const statusData = await statusRes.json();
                            
                            console.log(`ğŸ“Š [${elapsedSeconds}s] äº«è®¾è®¡çŠ¶æ€å“åº”:`, {
                                isLoggedIn: statusData.isLoggedIn,
                                message: statusData.message,
                                site: statusData.site,
                                fullData: statusData
                            });
                            
                            if (statusData.isLoggedIn) {
                                // ç™»å½•æˆåŠŸ
                                console.log('âœ… æ£€æµ‹åˆ° isLoggedIn = true');
                                
                                if (!design006LoginSuccessShown) {
                                    console.log('ğŸ‰ äº«è®¾è®¡ç™»å½•æˆåŠŸï¼å¼€å§‹æ‰§è¡Œç™»å½•æˆåŠŸå¤„ç†...');
                                    design006LoginSuccessShown = true;
                                    design006LoginInProgress = false;
                                    
                                    // æ¸…é™¤å®šæ—¶å™¨
                                    if (design006LoginPollInterval) {
                                        console.log('ğŸ”„ æ¸…é™¤è½®è¯¢å®šæ—¶å™¨');
                                        clearInterval(design006LoginPollInterval);
                                        design006LoginPollInterval = null;
                                    }
                                    
                                    // éšè—äºŒç»´ç 
                                    qrSection.style.display = 'none';
                                    console.log('âœ… å·²éšè—äºŒç»´ç åŒºåŸŸ');
                                    
                                    // æ¢å¤æŒ‰é’®
                                    btn.disabled = false;
                                    btn.textContent = 'ğŸ“± å¼€å§‹QQæ‰«ç ç™»å½•';
                                    console.log('âœ… å·²æ¢å¤ç™»å½•æŒ‰é’®çŠ¶æ€');
                                    
                                    // æ›´æ–°UI
                                    updateDesign006LoginUI(true);
                                    console.log('âœ… å·²æ›´æ–°UIä¸ºå·²ç™»å½•çŠ¶æ€');
                                    
                                    // æ›´æ–°é…é¢å¡ç‰‡UI
                                    updateQuotaCardUI('design006', true);
                                    
                                    // æ˜¾ç¤ºæç¤º
                                    alert('âœ… äº«è®¾è®¡ç™»å½•æˆåŠŸï¼\n\nå›¢é˜Ÿæˆå‘˜ç°åœ¨å¯ä»¥ä¸‹è½½äº«è®¾è®¡ç´ æäº†ã€‚');
                                    console.log('âœ… ç™»å½•æˆåŠŸå¤„ç†å®Œæˆ');
                                } else {
                                    console.log('âš ï¸  ç™»å½•æˆåŠŸæç¤ºå·²æ˜¾ç¤ºè¿‡ï¼Œè·³è¿‡é‡å¤å¤„ç†');
                                }
                            } else {
                                console.log(`â³ [${elapsedSeconds}s] å°šæœªç™»å½•ï¼Œç»§ç»­ç­‰å¾…...`);
                            }
                        } catch (error) {
                            console.error('âŒ æ£€æŸ¥äº«è®¾è®¡ç™»å½•çŠ¶æ€å¤±è´¥:', error);
                            console.error('ğŸ“Š é”™è¯¯è¯¦æƒ…:', {
                                message: error.message,
                                stack: error.stack
                            });
                        }
                        
                        // è¶…æ—¶æ£€æŸ¥ï¼ˆ3åˆ†é’Ÿï¼‰
                        if (elapsedSeconds >= 180) {
                            if (design006LoginPollInterval) {
                                clearInterval(design006LoginPollInterval);
                                design006LoginPollInterval = null;
                            }
                            design006LoginInProgress = false;
                            
                            qrSection.style.display = 'none';
                            btn.disabled = false;
                            btn.textContent = 'ğŸ“± å¼€å§‹QQæ‰«ç ç™»å½•';
                            alert('â±ï¸ ç™»å½•è¶…æ—¶\n\nè¯·é‡æ–°ç‚¹å‡»ç™»å½•æŒ‰é’®è·å–æ–°äºŒç»´ç ');
                        }
                    }, 2000);
                    
                } else if (data.error) {
                    console.error('âŒ æœåŠ¡å™¨è¿”å›é”™è¯¯:', data.error);
                    throw new Error(data.error);
                } else {
                    console.error('âŒ æœåŠ¡å™¨è¿”å›æ•°æ®æ ¼å¼ä¸æ­£ç¡®:', {
                        hasSuccess: !!data.success,
                        hasWaiting: !!data.waiting,
                        hasQrcode: !!data.qrcode,
                        data: data
                    });
                    throw new Error('è·å–äºŒç»´ç å¤±è´¥ï¼šæœåŠ¡å™¨è¿”å›æ•°æ®ä¸å®Œæ•´');
                }
                
            } catch (error) {
                console.error('âŒ äº«è®¾è®¡ç™»å½•å¤±è´¥:', error);
                console.error('ğŸ“Š é”™è¯¯è¯¦æƒ…:', {
                    message: error.message,
                    stack: error.stack
                });
                
                alert('âŒ ç™»å½•å¤±è´¥ï¼š' + error.message + '\n\nè¯·æŸ¥çœ‹æ§åˆ¶å°(F12)è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯');
                qrSection.style.display = 'none';
                btn.disabled = false;
                btn.textContent = 'ğŸ“± å¼€å§‹QQæ‰«ç ç™»å½•';
                design006LoginInProgress = false;
            }
        }
        
        // äº«è®¾è®¡é€€å‡ºç™»å½•
        async function design006Logout() {
            if (!confirm('ç¡®å®šè¦é€€å‡ºäº«è®¾è®¡ç™»å½•å—ï¼Ÿ\n\né€€å‡ºåå›¢é˜Ÿæˆå‘˜å°†æ— æ³•ä¸‹è½½äº«è®¾è®¡ç´ æã€‚')) {
                return;
            }
            
            // æ¸…é™¤å¯èƒ½å­˜åœ¨çš„ç™»å½•è½®è¯¢å®šæ—¶å™¨å’Œæ ‡å¿—
            if (design006LoginPollInterval) {
                clearInterval(design006LoginPollInterval);
                design006LoginPollInterval = null;
            }
            design006LoginInProgress = false;
            design006LoginSuccessShown = false;
            
            const btn = document.getElementById('design006LogoutBtn');
            const originalText = btn.textContent;
            btn.disabled = true;
            btn.textContent = 'ğŸ”„ æ­£åœ¨é€€å‡º...';
            
            try {
                const res = await fetch(`${serverUrl}/api/design006/logout`, {
                    method: 'POST'
                });
                
                const data = await res.json();
                
                if (data.success) {
                    alert('âœ… å·²é€€å‡ºäº«è®¾è®¡ç™»å½•\n\n' + data.message);
                    updateDesign006LoginUI(false);
                    updateQuotaCardUI('design006', false);
                } else {
                    throw new Error(data.error || 'é€€å‡ºå¤±è´¥');
                }
                
            } catch (error) {
                alert('âŒ é€€å‡ºå¤±è´¥ï¼š' + error.message);
            } finally {
                btn.disabled = false;
                btn.textContent = originalText;
            }
        }
        
        // æ£€æŸ¥äº«è®¾è®¡ç™»å½•çŠ¶æ€
        async function checkDesign006Status() {
            try {
                console.log('ğŸ” æ‰‹åŠ¨æ£€æŸ¥äº«è®¾è®¡ç™»å½•çŠ¶æ€...');
                const res = await fetch(`${serverUrl}/api/design006/status`);
                const data = await res.json();
                
                console.log('ğŸ“Š äº«è®¾è®¡çŠ¶æ€æ£€æŸ¥ç»“æœ:', data);
                
                if (data.isLoggedIn) {
                    console.log('âœ… æ£€æµ‹åˆ°äº«è®¾è®¡å·²ç™»å½•ï¼');
                    
                    // æ¸…é™¤è½®è¯¢å®šæ—¶å™¨
                    if (design006LoginPollInterval) {
                        console.log('ğŸ”„ æ¸…é™¤ç°æœ‰çš„ç™»å½•è½®è¯¢å®šæ—¶å™¨');
                        clearInterval(design006LoginPollInterval);
                        design006LoginPollInterval = null;
                    }
                    
                    // é‡ç½®ç™»å½•æ ‡å¿—
                    design006LoginInProgress = false;
                    design006LoginSuccessShown = true;
                    
                    // éšè—äºŒç»´ç åŒºåŸŸ
                    const qrSection = document.getElementById('design006QrCodeSection');
                    if (qrSection && qrSection.style.display !== 'none') {
                        qrSection.style.display = 'none';
                        console.log('âœ… å·²éšè—äºŒç»´ç åŒºåŸŸ');
                    }
                    
                    // æ¢å¤ç™»å½•æŒ‰é’®çŠ¶æ€
                    const loginBtn = document.getElementById('design006QrLoginBtn');
                    if (loginBtn) {
                        loginBtn.disabled = false;
                        loginBtn.textContent = 'ğŸ“± å¼€å§‹QQæ‰«ç ç™»å½•';
                    }
                    
                    // æ›´æ–°UIä¸ºå·²ç™»å½•çŠ¶æ€
                    updateDesign006LoginUI(true);
                    
                    // æ›´æ–°é…é¢å¡ç‰‡UI
                    updateQuotaCardUI('design006', true);
                    
                    // æ˜¾ç¤ºç™»å½•æˆåŠŸæç¤º
                    alert('âœ… äº«è®¾è®¡å·²ç™»å½•ï¼\n\n' + (data.message || 'å›¢é˜Ÿæˆå‘˜ç°åœ¨å¯ä»¥ä¸‹è½½äº«è®¾è®¡ç´ æäº†ã€‚'));
                } else {
                    // æœªç™»å½•
                    console.log('âŒ äº«è®¾è®¡æœªç™»å½•');
                    updateDesign006LoginUI(false);
                    updateQuotaCardUI('design006', false);
                    alert('âŒ äº«è®¾è®¡æœªç™»å½•\n\n' + (data.message || 'è¯·å…ˆå®Œæˆç™»å½•'));
                }
            } catch (error) {
                console.error('âŒ æ£€æŸ¥äº«è®¾è®¡çŠ¶æ€å¤±è´¥:', error);
                alert('âŒ æ£€æŸ¥çŠ¶æ€å¤±è´¥ï¼š' + error.message);
            }
        }
        
        // è‡ªåŠ¨æ£€æµ‹æ‰€æœ‰ç½‘ç«™çš„ç™»å½•çŠ¶æ€ï¼ˆé™é»˜æ¨¡å¼ï¼Œä¸æ˜¾ç¤ºalertï¼‰
        async function autoCheckAllLoginStatus() {
            console.log('ğŸ”„ è‡ªåŠ¨æ£€æµ‹æ‰€æœ‰ç½‘ç«™ç™»å½•çŠ¶æ€...');
            
            // æ£€æµ‹èŠ±ç“£ç½‘ç™»å½•çŠ¶æ€
            try {
                const huabanRes = await fetch(`${serverUrl}/api/status`);
                const huabanData = await huabanRes.json();
                updateQuotaCardUI('huaban', huabanData.isLoggedIn);
            } catch (error) {
                console.error('âŒ æ£€æŸ¥èŠ±ç“£ç½‘çŠ¶æ€å¤±è´¥:', error);
                updateQuotaCardUI('huaban', false);
            }
            
            // æ£€æµ‹è§…å…ƒç´ ç™»å½•çŠ¶æ€
            try {
                const yuansuRes = await fetch(`${serverUrl}/api/yuansu/status`);
                const yuansuData = await yuansuRes.json();
                updateQuotaCardUI('yuansu', yuansuData.isLoggedIn);
                // åŒæ­¥æ›´æ–°ç®¡ç†å‘˜ç•Œé¢çš„ç™»å½•çŠ¶æ€
                updateYuansuLoginUI(yuansuData.isLoggedIn);
            } catch (error) {
                console.error('âŒ æ£€æŸ¥è§…å…ƒç´ çŠ¶æ€å¤±è´¥:', error);
                updateQuotaCardUI('yuansu', false);
                updateYuansuLoginUI(false);
            }
            
            // æ£€æµ‹90è®¾è®¡ç™»å½•çŠ¶æ€
            try {
                const ninetyShejieRes = await fetch(`${serverUrl}/api/90sheji/status`);
                const ninetyShejieData = await ninetyShejieRes.json();
                updateQuotaCardUI('ninetyshejie', ninetyShejieData.isLoggedIn);
                // åŒæ­¥æ›´æ–°ç®¡ç†å‘˜ç•Œé¢çš„ç™»å½•çŠ¶æ€
                updateNinetyShejieLoginUI(ninetyShejieData.isLoggedIn);
            } catch (error) {
                console.error('âŒ æ£€æŸ¥90è®¾è®¡çŠ¶æ€å¤±è´¥:', error);
                updateQuotaCardUI('ninetyshejie', false);
                updateNinetyShejieLoginUI(false);
            }
            
            // æ£€æµ‹äº«è®¾è®¡ç™»å½•çŠ¶æ€
            try {
                const design006Res = await fetch(`${serverUrl}/api/design006/status`);
                const design006Data = await design006Res.json();
                updateQuotaCardUI('design006', design006Data.isLoggedIn);
                // åŒæ­¥æ›´æ–°ç®¡ç†å‘˜ç•Œé¢çš„ç™»å½•çŠ¶æ€
                updateDesign006LoginUI(design006Data.isLoggedIn);
                console.log('âœ… äº«è®¾è®¡ç™»å½•çŠ¶æ€å·²æ›´æ–°:', design006Data.isLoggedIn ? 'å·²ç™»å½•' : 'æœªç™»å½•');
            } catch (error) {
                console.error('âŒ æ£€æŸ¥äº«è®¾è®¡çŠ¶æ€å¤±è´¥:', error);
                updateQuotaCardUI('design006', false);
                updateDesign006LoginUI(false);
            }
            
            console.log('âœ… ç™»å½•çŠ¶æ€æ£€æµ‹å®Œæˆ');
        }
        
        // æ›´æ–°é…é¢å¡ç‰‡UI
        function updateQuotaCardUI(site, isLoggedIn) {
            const statusElement = document.getElementById(`${site}Status`);
            const loggedInContent = document.getElementById(`${site}LoggedInContent`);
            const notLoggedInContent = document.getElementById(`${site}NotLoggedInContent`);
            
            // è·å–ç½‘ç«™åç§°
            const siteNames = {
                'huaban': 'èŠ±ç“£ç½‘',
                'yuansu': 'è§…å…ƒç´ ',
                'ninetyshejie': '90è®¾è®¡',
                'design006': 'äº«è®¾è®¡'
            };
            const siteName = siteNames[site] || site;
            
            if (isLoggedIn) {
                // å·²ç™»å½•
                if (statusElement) {
                    // ğŸ¯ æ‰€æœ‰ç«™ç‚¹éƒ½æ˜¾ç¤º"å·²ç™»å½•"ï¼Œä½¿ç”¨å„è‡ªçš„ä¸“å±é¢œè‰²
                    statusElement.textContent = 'å·²ç™»å½•';
                    statusElement.className = `quota-status ${site}-logged`;
                }
                if (loggedInContent) loggedInContent.style.display = 'block';
                if (notLoggedInContent) notLoggedInContent.style.display = 'none';
                console.log(`âœ… ${siteName} å·²ç™»å½•`);
            } else {
                // æœªç™»å½•
                if (statusElement) {
                    statusElement.textContent = 'æœªç™»å½•';
                    statusElement.className = 'quota-status limited';
                }
                if (loggedInContent) loggedInContent.style.display = 'none';
                if (notLoggedInContent) notLoggedInContent.style.display = 'block';
                console.log(`âŒ ${siteName} æœªç™»å½•`);
            }
        }
        
        // æ‰‹åŠ¨åˆ·æ–°è¿æ¥å’Œç™»å½•çŠ¶æ€
        async function manualRefresh() {
            const btn = document.getElementById('refreshBtn');
            
            // æ·»åŠ åˆ·æ–°åŠ¨ç”»
            btn.classList.add('refreshing');
            btn.disabled = true;
            
            console.log('ğŸ”„ æ‰‹åŠ¨åˆ·æ–°æ‰€æœ‰çŠ¶æ€...');
            
            try {
                // æ£€æŸ¥æœåŠ¡å™¨è¿æ¥
                await checkConnection();
                
                // æ£€æŸ¥æ‰€æœ‰ç½‘ç«™ç™»å½•çŠ¶æ€
                await autoCheckAllLoginStatus();
                
                console.log('âœ… åˆ·æ–°å®Œæˆ');
            } catch (error) {
                console.error('âŒ åˆ·æ–°å¤±è´¥:', error);
            } finally {
                // ç§»é™¤åˆ·æ–°åŠ¨ç”»
                setTimeout(() => {
                    btn.classList.remove('refreshing');
                    btn.disabled = false;
                }, 500);
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶ç«‹å³æ£€æŸ¥è¿æ¥å’Œç™»å½•çŠ¶æ€
        checkConnection();
        autoCheckAllLoginStatus();
        
        // å®šæ—¶æ£€æŸ¥è¿æ¥ï¼ˆæ¯10åˆ†é’Ÿï¼‰
        setInterval(checkConnection, 600000); // 600000ms = 10åˆ†é’Ÿ
        
        // å®šæ—¶æ£€æŸ¥æ‰€æœ‰ç½‘ç«™ç™»å½•çŠ¶æ€ï¼ˆæ¯1åˆ†é’Ÿï¼‰
        setInterval(autoCheckAllLoginStatus, 60000); // 60000ms = 1åˆ†é’Ÿ
        
        // ==================== æš—é»‘æ¨¡å¼åˆ‡æ¢åŠŸèƒ½ ====================
        
        // åˆ‡æ¢æš—é»‘æ¨¡å¼
        function toggleDarkMode() {
            const body = document.body;
            const slider = document.getElementById('themeSlider');
            const isDark = body.classList.toggle('dark-mode');
            
            // æ›´æ–°æŒ‰é’®å›¾æ ‡å’Œæ ‡é¢˜
            if (isDark) {
                slider.textContent = 'ğŸŒ™';
                document.getElementById('themeToggle').title = 'åˆ‡æ¢æ˜äº®æ¨¡å¼';
                localStorage.setItem('darkMode', 'enabled');
            } else {
                slider.textContent = 'â˜€ï¸';
                document.getElementById('themeToggle').title = 'åˆ‡æ¢æš—é»‘æ¨¡å¼';
                localStorage.setItem('darkMode', 'disabled');
            }
        }
        
        // åˆå§‹åŒ–æš—é»‘æ¨¡å¼
        function initDarkMode() {
            const darkMode = localStorage.getItem('darkMode');
            if (darkMode === 'enabled') {
                document.body.classList.add('dark-mode');
                document.getElementById('themeSlider').textContent = 'ğŸŒ™';
                document.getElementById('themeToggle').title = 'åˆ‡æ¢æ˜äº®æ¨¡å¼';
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–æš—é»‘æ¨¡å¼
        initDarkMode();
    </script>
</body>
</html>

